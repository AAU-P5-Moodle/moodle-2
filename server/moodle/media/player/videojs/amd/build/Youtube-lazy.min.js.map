{"version":3,"file":"Youtube-lazy.min.js","sources":["../src/Youtube-lazy.js"],"sourcesContent":["/* The MIT License (MIT)\r\n\r\nCopyright (c) 2014-2015 Benoit Tremblay <trembl.ben@gmail.com>\r\n\r\nPermission is hereby granted, free of charge, to any person obtaining a copy\r\nof this software and associated documentation files (the \"Software\"), to deal\r\nin the Software without restriction, including without limitation the rights\r\nto use, copy, modify, merge, publish, distribute, sublicense, and/or sell\r\ncopies of the Software, and to permit persons to whom the Software is\r\nfurnished to do so, subject to the following conditions:\r\n\r\nThe above copyright notice and this permission notice shall be included in\r\nall copies or substantial portions of the Software.\r\n\r\nTHE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\r\nIMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\r\nFITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\r\nAUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\r\nLIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\r\nOUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN\r\nTHE SOFTWARE. */\r\n/*global define, YT*/\r\n(function (root, factory) {\r\n  if(typeof exports==='object' && typeof module!=='undefined') {\r\n    var videojs = require('video.js');\r\n    module.exports = factory(videojs.default || videojs);\r\n  } else if(typeof define === 'function' && define.amd) {\r\n    define(['media_videojs/video-lazy'], function(videojs){\r\n      return (root.Youtube = factory(videojs));\r\n    });\r\n  } else {\r\n    root.Youtube = factory(root.videojs);\r\n  }\r\n}(this, function(videojs) {\r\n  'use strict';\r\n\r\n  var _isOnMobile = videojs.browser.IS_IOS || videojs.browser.IS_NATIVE_ANDROID;\r\n  var Tech = videojs.getTech('Tech');\r\n\r\n  class Youtube extends Tech {\r\n\r\n    constructor(options, ready) {\r\n      super(options, ready);\r\n\r\n      this.setPoster(options.poster);\r\n      this.setSrc(this.options_.source, true);\r\n\r\n      // Set the vjs-youtube class to the player\r\n      // Parent is not set yet so we have to wait a tick\r\n      this.setTimeout(function() {\r\n        if (this.el_) {\r\n          this.el_.parentNode.className += ' vjs-youtube';\r\n\r\n          if (_isOnMobile) {\r\n            this.el_.parentNode.className += ' vjs-youtube-mobile';\r\n          }\r\n\r\n          if (Youtube.isApiReady) {\r\n            this.initYTPlayer();\r\n          } else {\r\n            Youtube.apiReadyQueue.push(this);\r\n          }\r\n        }\r\n      }.bind(this));\r\n    }\r\n\r\n    dispose() {\r\n      if (this.ytPlayer) {\r\n        //Dispose of the YouTube Player\r\n        if (this.ytPlayer.stopVideo) {\r\n          this.ytPlayer.stopVideo();\r\n        }\r\n        if (this.ytPlayer.destroy) {\r\n          this.ytPlayer.destroy();\r\n        }\r\n      } else {\r\n        //YouTube API hasn't finished loading or the player is already disposed\r\n        var index = Youtube.apiReadyQueue.indexOf(this);\r\n        if (index !== -1) {\r\n          Youtube.apiReadyQueue.splice(index, 1);\r\n        }\r\n      }\r\n      this.ytPlayer = null;\r\n\r\n      this.el_.parentNode.className = this.el_.parentNode.className\r\n          .replace(' vjs-youtube', '')\r\n          .replace(' vjs-youtube-mobile', '');\r\n      this.el_.parentNode.removeChild(this.el_);\r\n\r\n      //Needs to be called after the YouTube player is destroyed, otherwise there will be a null reference exception\r\n      Tech.prototype.dispose.call(this);\r\n    }\r\n\r\n    createEl() {\r\n      var div = document.createElement('div');\r\n      div.setAttribute('id', this.options_.techId);\r\n      div.setAttribute('style', 'width:100%;height:100%;top:0;left:0;position:absolute');\r\n      div.setAttribute('class', 'vjs-tech');\r\n\r\n      var divWrapper = document.createElement('div');\r\n      divWrapper.appendChild(div);\r\n\r\n      if (!_isOnMobile && !this.options_.ytControls) {\r\n        var divBlocker = document.createElement('div');\r\n        divBlocker.setAttribute('class', 'vjs-iframe-blocker');\r\n        divBlocker.setAttribute('style', 'position:absolute;top:0;left:0;width:100%;height:100%');\r\n\r\n        // In case the blocker is still there and we want to pause\r\n        divBlocker.onclick = function() {\r\n          this.pause();\r\n        }.bind(this);\r\n\r\n        divWrapper.appendChild(divBlocker);\r\n      }\r\n\r\n      return divWrapper;\r\n    }\r\n\r\n    initYTPlayer() {\r\n      var playerVars = {\r\n        controls: 0,\r\n        modestbranding: 1,\r\n        rel: 0,\r\n        showinfo: 0,\r\n        loop: this.options_.loop ? 1 : 0\r\n      };\r\n\r\n      // Let the user set any YouTube parameter\r\n      // https://developers.google.com/youtube/player_parameters?playerVersion=HTML5#Parameters\r\n      // To use YouTube controls, you must use ytControls instead\r\n      // To use the loop or autoplay, use the video.js settings\r\n\r\n      if (typeof this.options_.autohide !== 'undefined') {\r\n        playerVars.autohide = this.options_.autohide;\r\n      }\r\n\r\n      if (typeof this.options_['cc_load_policy'] !== 'undefined') {\r\n        playerVars['cc_load_policy'] = this.options_['cc_load_policy'];\r\n      }\r\n\r\n      if (typeof this.options_.ytControls !== 'undefined') {\r\n        playerVars.controls = this.options_.ytControls;\r\n      }\r\n\r\n      if (typeof this.options_.disablekb !== 'undefined') {\r\n        playerVars.disablekb = this.options_.disablekb;\r\n      }\r\n\r\n      if (typeof this.options_.color !== 'undefined') {\r\n        playerVars.color = this.options_.color;\r\n      }\r\n\r\n      if (!playerVars.controls) {\r\n        // Let video.js handle the fullscreen unless it is the YouTube native controls\r\n        playerVars.fs = 0;\r\n      } else if (typeof this.options_.fs !== 'undefined') {\r\n        playerVars.fs = this.options_.fs;\r\n      }\r\n\r\n      if (this.options_.source.src.indexOf('end=') !== -1) {\r\n        var srcEndTime = this.options_.source.src.match(/end=([0-9]*)/);\r\n        this.options_.end = parseInt(srcEndTime[1]);\r\n      }\r\n\r\n      if (typeof this.options_.end !== 'undefined') {\r\n        playerVars.end = this.options_.end;\r\n      }\r\n\r\n      if (typeof this.options_.hl !== 'undefined') {\r\n        playerVars.hl = this.options_.hl;\r\n      } else if (typeof this.options_.language !== 'undefined') {\r\n        // Set the YouTube player on the same language than video.js\r\n        playerVars.hl = this.options_.language.substr(0, 2);\r\n      }\r\n\r\n      if (typeof this.options_['iv_load_policy'] !== 'undefined') {\r\n        playerVars['iv_load_policy'] = this.options_['iv_load_policy'];\r\n      }\r\n\r\n      if (typeof this.options_.list !== 'undefined') {\r\n        playerVars.list = this.options_.list;\r\n      } else if (this.url && typeof this.url.listId !== 'undefined') {\r\n        playerVars.list = this.url.listId;\r\n      }\r\n\r\n      if (typeof this.options_.listType !== 'undefined') {\r\n        playerVars.listType = this.options_.listType;\r\n      }\r\n\r\n      if (typeof this.options_.modestbranding !== 'undefined') {\r\n        playerVars.modestbranding = this.options_.modestbranding;\r\n      }\r\n\r\n      if (typeof this.options_.playlist !== 'undefined') {\r\n        playerVars.playlist = this.options_.playlist;\r\n      }\r\n\r\n      if (typeof this.options_.playsinline !== 'undefined') {\r\n        playerVars.playsinline = this.options_.playsinline;\r\n      }\r\n\r\n      if (typeof this.options_.rel !== 'undefined') {\r\n        playerVars.rel = this.options_.rel;\r\n      }\r\n\r\n      if (typeof this.options_.showinfo !== 'undefined') {\r\n        playerVars.showinfo = this.options_.showinfo;\r\n      }\r\n\r\n      if (this.options_.source.src.indexOf('start=') !== -1) {\r\n        var srcStartTime = this.options_.source.src.match(/start=([0-9]*)/);\r\n        this.options_.start = parseInt(srcStartTime[1]);\r\n      }\r\n\r\n      if (typeof this.options_.start !== 'undefined') {\r\n        playerVars.start = this.options_.start;\r\n      }\r\n\r\n      if (typeof this.options_.theme !== 'undefined') {\r\n        playerVars.theme = this.options_.theme;\r\n      }\r\n\r\n      // Allow undocumented options to be passed along via customVars\r\n      if (typeof this.options_.customVars !== 'undefined') {\r\n        var customVars = this.options_.customVars;\r\n        Object.keys(customVars).forEach(function(key) {\r\n          playerVars[key] = customVars[key];\r\n        });\r\n      }\r\n\r\n      this.activeVideoId = this.url ? this.url.videoId : null;\r\n      this.activeList = playerVars.list;\r\n\r\n      var playerConfig = {\r\n        videoId: this.activeVideoId,\r\n        playerVars: playerVars,\r\n        events: {\r\n          onReady: this.onPlayerReady.bind(this),\r\n          onPlaybackQualityChange: this.onPlayerPlaybackQualityChange.bind(this),\r\n          onPlaybackRateChange: this.onPlayerPlaybackRateChange.bind(this),\r\n          onStateChange: this.onPlayerStateChange.bind(this),\r\n          onVolumeChange: this.onPlayerVolumeChange.bind(this),\r\n          onError: this.onPlayerError.bind(this)\r\n        }\r\n      };\r\n\r\n      if (typeof this.options_.enablePrivacyEnhancedMode !== 'undefined' && this.options_.enablePrivacyEnhancedMode) {\r\n        playerConfig.host = 'https://www.youtube-nocookie.com';\r\n      }\r\n\r\n      this.ytPlayer = new YT.Player(this.options_.techId, playerConfig);\r\n    }\r\n\r\n    onPlayerReady() {\r\n      if (this.options_.muted) {\r\n        this.ytPlayer.mute();\r\n      }\r\n\r\n      var playbackRates = this.ytPlayer.getAvailablePlaybackRates();\r\n      if (playbackRates.length > 1) {\r\n        this.featuresPlaybackRate = true;\r\n      }\r\n\r\n      this.playerReady_ = true;\r\n      this.triggerReady();\r\n\r\n      if (this.playOnReady) {\r\n        this.play();\r\n      } else if (this.cueOnReady) {\r\n        this.cueVideoById_(this.url.videoId);\r\n        this.activeVideoId = this.url.videoId;\r\n      }\r\n    }\r\n\r\n    onPlayerPlaybackQualityChange() {\r\n\r\n    }\r\n\r\n    onPlayerPlaybackRateChange() {\r\n      this.trigger('ratechange');\r\n    }\r\n\r\n    onPlayerStateChange(e) {\r\n      var state = e.data;\r\n\r\n      if (state === this.lastState || this.errorNumber) {\r\n        return;\r\n      }\r\n\r\n      this.lastState = state;\r\n\r\n      switch (state) {\r\n        case -1:\r\n          this.trigger('loadstart');\r\n          this.trigger('loadedmetadata');\r\n          this.trigger('durationchange');\r\n          this.trigger('ratechange');\r\n          break;\r\n\r\n        case YT.PlayerState.ENDED:\r\n          this.trigger('ended');\r\n          break;\r\n\r\n        case YT.PlayerState.PLAYING:\r\n          this.trigger('timeupdate');\r\n          this.trigger('durationchange');\r\n          this.trigger('playing');\r\n          this.trigger('play');\r\n\r\n          if (this.isSeeking) {\r\n            this.onSeeked();\r\n          }\r\n          break;\r\n\r\n        case YT.PlayerState.PAUSED:\r\n          this.trigger('canplay');\r\n          if (this.isSeeking) {\r\n            this.onSeeked();\r\n          } else {\r\n            this.trigger('pause');\r\n          }\r\n          break;\r\n\r\n        case YT.PlayerState.BUFFERING:\r\n          this.player_.trigger('timeupdate');\r\n          this.player_.trigger('waiting');\r\n          break;\r\n      }\r\n    }\r\n\r\n    onPlayerVolumeChange() {\r\n      this.trigger('volumechange');\r\n    }\r\n\r\n    onPlayerError(e) {\r\n      this.errorNumber = e.data;\r\n      this.trigger('pause');\r\n      this.trigger('error');\r\n    }\r\n\r\n    error() {\r\n      var code = 1000 + this.errorNumber; // as smaller codes are reserved\r\n      switch (this.errorNumber) {\r\n        case 5:\r\n          return { code: code, message: 'Error while trying to play the video' };\r\n\r\n        case 2:\r\n        case 100:\r\n          return { code: code, message: 'Unable to find the video' };\r\n\r\n        case 101:\r\n        case 150:\r\n          return {\r\n            code: code,\r\n            message: 'Playback on other Websites has been disabled by the video owner.'\r\n          };\r\n      }\r\n\r\n      return { code: code, message: 'YouTube unknown error (' + this.errorNumber + ')' };\r\n    }\r\n\r\n    loadVideoById_(id) {\r\n      var options = {\r\n        videoId: id\r\n      };\r\n      if (this.options_.start) {\r\n        options.startSeconds = this.options_.start;\r\n      }\r\n      if (this.options_.end) {\r\n        options.endSeconds = this.options_.end;\r\n      }\r\n      this.ytPlayer.loadVideoById(options);\r\n    }\r\n\r\n    cueVideoById_(id) {\r\n      var options = {\r\n        videoId: id\r\n      };\r\n      if (this.options_.start) {\r\n        options.startSeconds = this.options_.start;\r\n      }\r\n      if (this.options_.end) {\r\n        options.endSeconds = this.options_.end;\r\n      }\r\n      this.ytPlayer.cueVideoById(options);\r\n    }\r\n\r\n    src(src) {\r\n      if (src) {\r\n        this.setSrc({ src: src });\r\n      }\r\n\r\n      return this.source;\r\n    }\r\n\r\n    poster() {\r\n      // You can't start programmaticlly a video with a mobile\r\n      // through the iframe so we hide the poster and the play button (with CSS)\r\n      if (_isOnMobile) {\r\n        return null;\r\n      }\r\n\r\n      return this.poster_;\r\n    }\r\n\r\n    setPoster(poster) {\r\n      this.poster_ = poster;\r\n    }\r\n\r\n    setSrc(source) {\r\n      if (!source || !source.src) {\r\n        return;\r\n      }\r\n\r\n      delete this.errorNumber;\r\n      this.source = source;\r\n      this.url = Youtube.parseUrl(source.src);\r\n\r\n      if (!this.options_.poster) {\r\n        if (this.url.videoId) {\r\n          // Set the low resolution first\r\n          this.poster_ = 'https://img.youtube.com/vi/' + this.url.videoId + '/0.jpg';\r\n          this.trigger('posterchange');\r\n\r\n          // Check if their is a high res\r\n          this.checkHighResPoster();\r\n        }\r\n      }\r\n\r\n      if (this.options_.autoplay && !_isOnMobile) {\r\n        if (this.isReady_) {\r\n          this.play();\r\n        } else {\r\n          this.playOnReady = true;\r\n        }\r\n      } else if (this.activeVideoId !== this.url.videoId) {\r\n        if (this.isReady_) {\r\n          this.cueVideoById_(this.url.videoId);\r\n          this.activeVideoId = this.url.videoId;\r\n        } else {\r\n          this.cueOnReady = true;\r\n        }\r\n      }\r\n    }\r\n\r\n    autoplay() {\r\n      return this.options_.autoplay;\r\n    }\r\n\r\n    setAutoplay(val) {\r\n      this.options_.autoplay = val;\r\n    }\r\n\r\n    loop() {\r\n      return this.options_.loop;\r\n    }\r\n\r\n    setLoop(val) {\r\n      this.options_.loop = val;\r\n    }\r\n\r\n    play() {\r\n      if (!this.url || !this.url.videoId) {\r\n        return;\r\n      }\r\n\r\n      this.wasPausedBeforeSeek = false;\r\n\r\n      if (this.isReady_) {\r\n        if (this.url.listId) {\r\n          if (this.activeList === this.url.listId) {\r\n            this.ytPlayer.playVideo();\r\n          } else {\r\n            this.ytPlayer.loadPlaylist(this.url.listId);\r\n            this.activeList = this.url.listId;\r\n          }\r\n        }\r\n\r\n        if (this.activeVideoId === this.url.videoId) {\r\n          this.ytPlayer.playVideo();\r\n        } else {\r\n          this.loadVideoById_(this.url.videoId);\r\n          this.activeVideoId = this.url.videoId;\r\n        }\r\n      } else {\r\n        this.trigger('waiting');\r\n        this.playOnReady = true;\r\n      }\r\n    }\r\n\r\n    pause() {\r\n      if (this.ytPlayer) {\r\n        this.ytPlayer.pauseVideo();\r\n      }\r\n    }\r\n\r\n    paused() {\r\n      return (this.ytPlayer) ?\r\n          (this.lastState !== YT.PlayerState.PLAYING && this.lastState !== YT.PlayerState.BUFFERING)\r\n          : true;\r\n    }\r\n\r\n    currentTime() {\r\n      return this.ytPlayer ? this.ytPlayer.getCurrentTime() : 0;\r\n    }\r\n\r\n    setCurrentTime(seconds) {\r\n      if (this.lastState === YT.PlayerState.PAUSED) {\r\n        this.timeBeforeSeek = this.currentTime();\r\n      }\r\n\r\n      if (!this.isSeeking) {\r\n        this.wasPausedBeforeSeek = this.paused();\r\n      }\r\n\r\n      this.ytPlayer.seekTo(seconds, true);\r\n      this.trigger('timeupdate');\r\n      this.trigger('seeking');\r\n      this.isSeeking = true;\r\n\r\n      // A seek event during pause does not return an event to trigger a seeked event,\r\n      // so run an interval timer to look for the currentTime to change\r\n      if (this.lastState === YT.PlayerState.PAUSED && this.timeBeforeSeek !== seconds) {\r\n        clearInterval(this.checkSeekedInPauseInterval);\r\n        this.checkSeekedInPauseInterval = setInterval(function() {\r\n          if (this.lastState !== YT.PlayerState.PAUSED || !this.isSeeking) {\r\n            // If something changed while we were waiting for the currentTime to change,\r\n            //  clear the interval timer\r\n            clearInterval(this.checkSeekedInPauseInterval);\r\n          } else if (this.currentTime() !== this.timeBeforeSeek) {\r\n            this.trigger('timeupdate');\r\n            this.onSeeked();\r\n          }\r\n        }.bind(this), 250);\r\n      }\r\n    }\r\n\r\n    seeking() {\r\n      return this.isSeeking;\r\n    }\r\n\r\n    seekable() {\r\n      if(!this.ytPlayer) {\r\n        return videojs.createTimeRange();\r\n      }\r\n\r\n      return videojs.createTimeRange(0, this.ytPlayer.getDuration());\r\n    }\r\n\r\n    onSeeked() {\r\n      clearInterval(this.checkSeekedInPauseInterval);\r\n      this.isSeeking = false;\r\n\r\n      if (this.wasPausedBeforeSeek) {\r\n        this.pause();\r\n      }\r\n\r\n      this.trigger('seeked');\r\n    }\r\n\r\n    playbackRate() {\r\n      return this.ytPlayer ? this.ytPlayer.getPlaybackRate() : 1;\r\n    }\r\n\r\n    setPlaybackRate(suggestedRate) {\r\n      if (!this.ytPlayer) {\r\n        return;\r\n      }\r\n\r\n      this.ytPlayer.setPlaybackRate(suggestedRate);\r\n    }\r\n\r\n    duration() {\r\n      return this.ytPlayer ? this.ytPlayer.getDuration() : 0;\r\n    }\r\n\r\n    currentSrc() {\r\n      return this.source && this.source.src;\r\n    }\r\n\r\n    ended() {\r\n      return this.ytPlayer ? (this.lastState === YT.PlayerState.ENDED) : false;\r\n    }\r\n\r\n    volume() {\r\n      return this.ytPlayer ? this.ytPlayer.getVolume() / 100.0 : 1;\r\n    }\r\n\r\n    setVolume(percentAsDecimal) {\r\n      if (!this.ytPlayer) {\r\n        return;\r\n      }\r\n\r\n      this.ytPlayer.setVolume(percentAsDecimal * 100.0);\r\n    }\r\n\r\n    muted() {\r\n      return this.ytPlayer ? this.ytPlayer.isMuted() : false;\r\n    }\r\n\r\n    setMuted(mute) {\r\n      if (!this.ytPlayer) {\r\n        return;\r\n      }\r\n      else{\r\n        this.muted(true);\r\n      }\r\n\r\n      if (mute) {\r\n        this.ytPlayer.mute();\r\n      } else {\r\n        this.ytPlayer.unMute();\r\n      }\r\n      this.setTimeout( function(){\r\n        this.trigger('volumechange');\r\n      }, 50);\r\n    }\r\n\r\n    buffered() {\r\n      if(!this.ytPlayer || !this.ytPlayer.getVideoLoadedFraction) {\r\n        return videojs.createTimeRange();\r\n      }\r\n\r\n      var bufferedEnd = this.ytPlayer.getVideoLoadedFraction() * this.ytPlayer.getDuration();\r\n\r\n      return videojs.createTimeRange(0, bufferedEnd);\r\n    }\r\n\r\n    // TODO: Can we really do something with this on YouTUbe?\r\n    preload() {}\r\n    load() {}\r\n    reset() {}\r\n    networkState() {\r\n      if (!this.ytPlayer) {\r\n        return 0; //NETWORK_EMPTY\r\n      }\r\n      switch (this.ytPlayer.getPlayerState()) {\r\n        case -1: //unstarted\r\n          return 0; //NETWORK_EMPTY\r\n        case 3: //buffering\r\n          return 2; //NETWORK_LOADING\r\n        default:\r\n          return 1; //NETWORK_IDLE\r\n      }\r\n    }\r\n    readyState() {\r\n      if (!this.ytPlayer) {\r\n        return 0; //HAVE_NOTHING\r\n      }\r\n      switch (this.ytPlayer.getPlayerState()) {\r\n        case -1: //unstarted\r\n          return 0; //HAVE_NOTHING\r\n        case 5: //video cued\r\n          return 1; //HAVE_METADATA\r\n        case 3: //buffering\r\n          return 2; //HAVE_CURRENT_DATA\r\n        default:\r\n          return 4; //HAVE_ENOUGH_DATA\r\n      }\r\n    }\r\n\r\n    supportsFullScreen() {\r\n      return document.fullscreenEnabled ||\r\n          document.webkitFullscreenEnabled ||\r\n          document.mozFullScreenEnabled ||\r\n          document.msFullscreenEnabled;\r\n    }\r\n\r\n    // Tries to get the highest resolution thumbnail available for the video\r\n    checkHighResPoster(){\r\n      var uri = 'https://img.youtube.com/vi/' + this.url.videoId + '/maxresdefault.jpg';\r\n\r\n      try {\r\n        var image = new Image();\r\n        image.onload = function(){\r\n          // Onload may still be called if YouTube returns the 120x90 error thumbnail\r\n          if('naturalHeight' in image){\r\n            if (image.naturalHeight <= 90 || image.naturalWidth <= 120) {\r\n              return;\r\n            }\r\n          } else if(image.height <= 90 || image.width <= 120) {\r\n            return;\r\n          }\r\n\r\n          this.poster_ = uri;\r\n          this.trigger('posterchange');\r\n        }.bind(this);\r\n        image.onerror = function(){};\r\n        image.src = uri;\r\n      }\r\n      catch(e){}\r\n    }\r\n  }\r\n\r\n  Youtube.isSupported = function() {\r\n    return true;\r\n  };\r\n\r\n  Youtube.canPlaySource = function(e) {\r\n    return Youtube.canPlayType(e.type);\r\n  };\r\n\r\n  Youtube.canPlayType = function(e) {\r\n    return (e === 'video/youtube');\r\n  };\r\n\r\n  Youtube.parseUrl = function(url) {\r\n    var result = {\r\n      videoId: null\r\n    };\r\n\r\n    var regex = /^.*(youtu.be\\/|v\\/|u\\/\\w\\/|embed\\/|watch\\?v=|\\&v=)([^#\\&\\?]*).*/;\r\n    var match = url.match(regex);\r\n\r\n    if (match && match[2].length === 11) {\r\n      result.videoId = match[2];\r\n    }\r\n\r\n    var regPlaylist = /[?&]list=([^#\\&\\?]+)/;\r\n    match = url.match(regPlaylist);\r\n\r\n    if(match && match[1]) {\r\n      result.listId = match[1];\r\n    }\r\n\r\n    return result;\r\n  };\r\n\r\n  function apiLoaded() {\r\n    YT.ready(function() {\r\n      Youtube.isApiReady = true;\r\n\r\n      for (var i = 0; i < Youtube.apiReadyQueue.length; ++i) {\r\n        Youtube.apiReadyQueue[i].initYTPlayer();\r\n      }\r\n    });\r\n  }\r\n\r\n  function loadScript(src, callback) {\r\n    var loaded = false;\r\n    var tag = document.createElement('script');\r\n    var firstScriptTag = document.getElementsByTagName('script')[0];\r\n    if (!firstScriptTag) {\r\n      // when loaded in jest without jsdom setup it doesn't get any element.\r\n      // In jest it doesn't really make sense to do anything, because no one is watching youtube in jest\r\n      return;\r\n    }\r\n    firstScriptTag.parentNode.insertBefore(tag, firstScriptTag);\r\n    tag.onload = function () {\r\n      if (!loaded) {\r\n        loaded = true;\r\n        callback();\r\n      }\r\n    };\r\n    tag.onreadystatechange = function () {\r\n      if (!loaded && (this.readyState === 'complete' || this.readyState === 'loaded')) {\r\n        loaded = true;\r\n        callback();\r\n      }\r\n    };\r\n    tag.src = src;\r\n  }\r\n\r\n  function injectCss() {\r\n    var css = // iframe blocker to catch mouse events\r\n        '.vjs-youtube .vjs-iframe-blocker { display: none; }' +\r\n        '.vjs-youtube.vjs-user-inactive .vjs-iframe-blocker { display: block; }' +\r\n        '.vjs-youtube .vjs-poster { background-size: cover; }' +\r\n        '.vjs-youtube-mobile .vjs-big-play-button { display: none; }';\r\n\r\n    var head = document.head || document.getElementsByTagName('head')[0];\r\n\r\n    var style = document.createElement('style');\r\n    style.type = 'text/css';\r\n\r\n    if (style.styleSheet){\r\n      style.styleSheet.cssText = css;\r\n    } else {\r\n      style.appendChild(document.createTextNode(css));\r\n    }\r\n\r\n    head.appendChild(style);\r\n  }\r\n\r\n  Youtube.apiReadyQueue = [];\r\n\r\n  if (typeof document !== 'undefined'){\r\n    loadScript('https://www.youtube.com/iframe_api', apiLoaded);\r\n    injectCss();\r\n  }\r\n\r\n  // Older versions of VJS5 doesn't have the registerTech function\r\n  if (typeof videojs.registerTech !== 'undefined') {\r\n    videojs.registerTech('Youtube', Youtube);\r\n  } else {\r\n    videojs.registerComponent('Youtube', Youtube);\r\n  }\r\n}));\r\n"],"names":["root","factory","exports","module","videojs","require","default","define","amd","Youtube","this","css","head","style","src","callback","loaded","tag","firstScriptTag","_isOnMobile","browser","IS_IOS","IS_NATIVE_ANDROID","Tech","getTech","constructor","options","ready","super","setPoster","poster","setSrc","options_","source","setTimeout","el_","parentNode","className","isApiReady","initYTPlayer","apiReadyQueue","push","bind","dispose","ytPlayer","stopVideo","destroy","index","indexOf","splice","replace","removeChild","prototype","call","createEl","div","document","createElement","setAttribute","techId","divWrapper","appendChild","ytControls","divBlocker","onclick","pause","playerVars","controls","modestbranding","rel","showinfo","loop","autohide","disablekb","color","fs","srcEndTime","match","end","parseInt","hl","language","substr","list","url","listId","listType","playlist","playsinline","srcStartTime","start","theme","customVars","Object","keys","forEach","key","activeVideoId","videoId","activeList","playerConfig","events","onReady","onPlayerReady","onPlaybackQualityChange","onPlayerPlaybackQualityChange","onPlaybackRateChange","onPlayerPlaybackRateChange","onStateChange","onPlayerStateChange","onVolumeChange","onPlayerVolumeChange","onError","onPlayerError","enablePrivacyEnhancedMode","host","YT","Player","muted","mute","getAvailablePlaybackRates","length","featuresPlaybackRate","playerReady_","triggerReady","playOnReady","play","cueOnReady","cueVideoById_","trigger","e","state","data","lastState","errorNumber","PlayerState","ENDED","PLAYING","isSeeking","onSeeked","PAUSED","BUFFERING","player_","error","code","message","loadVideoById_","id","startSeconds","endSeconds","loadVideoById","cueVideoById","poster_","parseUrl","checkHighResPoster","autoplay","isReady_","setAutoplay","val","setLoop","wasPausedBeforeSeek","playVideo","loadPlaylist","pauseVideo","paused","currentTime","getCurrentTime","setCurrentTime","seconds","timeBeforeSeek","seekTo","clearInterval","checkSeekedInPauseInterval","setInterval","seeking","seekable","createTimeRange","getDuration","playbackRate","getPlaybackRate","setPlaybackRate","suggestedRate","duration","currentSrc","ended","volume","getVolume","setVolume","percentAsDecimal","isMuted","setMuted","unMute","buffered","getVideoLoadedFraction","bufferedEnd","preload","load","reset","networkState","getPlayerState","readyState","supportsFullScreen","fullscreenEnabled","webkitFullscreenEnabled","mozFullScreenEnabled","msFullscreenEnabled","uri","image","Image","onload","naturalHeight","naturalWidth","height","width","onerror","isSupported","canPlaySource","canPlayType","type","result","i","getElementsByTagName","insertBefore","onreadystatechange","styleSheet","cssText","createTextNode","registerTech","registerComponent"],"mappings":"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"}