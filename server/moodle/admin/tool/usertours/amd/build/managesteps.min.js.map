{"version":3,"file":"managesteps.min.js","sources":["../src/managesteps.js"],"sourcesContent":["/**\r\n * Step management code.\r\n *\r\n * @module     tool_usertours/managesteps\r\n * @copyright  2016 Andrew Nicols <andrew@nicols.co.uk>\r\n */\r\nimport {prefetchStrings} from 'core/prefetch';\r\nimport {getString} from 'core/str';\r\nimport {confirm as confirmModal} from 'core/notification';\r\n\r\n/**\r\n * Handle step management actions.\r\n *\r\n * @param   {Event} e\r\n * @private\r\n */\r\nconst removeStepHandler = e => {\r\n    const deleteButton = e.target.closest('[data-action=\"delete\"]');\r\n    if (deleteButton) {\r\n        e.preventDefault();\r\n        removeStepFromLink(deleteButton.href);\r\n    }\r\n};\r\n\r\n/**\r\n * Handle removal of a step with confirmation.\r\n *\r\n * @param {string} targetUrl\r\n * @private\r\n */\r\nconst removeStepFromLink = targetUrl => {\r\n    confirmModal(\r\n        getString('confirmstepremovaltitle', 'tool_usertours'),\r\n        getString('confirmstepremovalquestion', 'tool_usertours'),\r\n        getString('yes', 'core'),\r\n        getString('no', 'core'),\r\n        () => {\r\n            window.location = targetUrl;\r\n        }\r\n    );\r\n};\r\n\r\n/**\r\n * Set up the step management handlers.\r\n */\r\nexport const setup = () => {\r\n    prefetchStrings('tool_usertours', [\r\n        'confirmstepremovaltitle',\r\n        'confirmstepremovalquestion',\r\n    ]);\r\n\r\n    prefetchStrings('core', [\r\n        'yes',\r\n        'no',\r\n    ]);\r\n\r\n    document.querySelector('body').addEventListener('click', removeStepHandler);\r\n};\r\n"],"names":["removeStepHandler","e","deleteButton","target","closest","preventDefault","removeStepFromLink","href","targetUrl","confirmModal","confirm","getString","window","location","_exports","setup","prefetchStrings","document","querySelector","addEventListener"],"mappings":"8NAgBA,MAAMA,kBAAoBC,IACtB,MAAMC,aAAeD,EAAEE,OAAOC,QAAQ,0BAClCF,eACAD,EAAEI,iBACFC,mBAAmBJ,aAAaK,MACpC,EASED,mBAAqBE,aACvB,EAAAC,cAAYC,UACR,EAAAC,KAAAA,WAAU,0BAA2B,mBACrC,EAAAA,KAAAA,WAAU,6BAA8B,mBACxC,EAAAA,KAASA,WAAC,MAAO,SACjB,EAAAA,KAAAA,WAAU,KAAM,SAChB,KACIC,OAAOC,SAAWL,SAAS,GAElC,EAkBHM,SAAAC,MAZmBA,MACjB,EAAAC,UAAAA,iBAAgB,iBAAkB,CAC9B,0BACA,gCAGJ,EAAAA,UAAAA,iBAAgB,OAAQ,CACpB,MACA,OAGJC,SAASC,cAAc,QAAQC,iBAAiB,QAASnB,kBAAkB,CAC7E"}