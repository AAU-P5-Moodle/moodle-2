{"version":3,"file":"competencies.min.js","sources":["../src/competencies.js"],"sourcesContent":["// This file is part of Moodle - http://moodle.org/\r\n//\r\n// Moodle is free software: you can redistribute it and/or modify\r\n// it under the terms of the GNU General Public License as published by\r\n// the Free Software Foundation, either version 3 of the License, or\r\n// (at your option) any later version.\r\n//\r\n// Moodle is distributed in the hope that it will be useful,\r\n// but WITHOUT ANY WARRANTY; without even the implied warranty of\r\n// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\r\n// GNU General Public License for more details.\r\n//\r\n// You should have received a copy of the GNU General Public License\r\n// along with Moodle.  If not, see <http://www.gnu.org/licenses/>.\r\n\r\n/**\r\n * Handle add/remove competency links.\r\n *\r\n * @module     tool_lp/competencies\r\n * @copyright  2015 Damyon Wiese <damyon@moodle.com>\r\n * @license    http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later\r\n */\r\ndefine(['jquery',\r\n        'core/notification',\r\n        'core/ajax',\r\n        'core/templates',\r\n        'core/str',\r\n        'tool_lp/competencypicker',\r\n        'tool_lp/dragdrop-reorder',\r\n        'core/pending'],\r\n       function($, notification, ajax, templates, str, Picker, dragdrop, Pending) {\r\n\r\n    /**\r\n     * Constructor\r\n     *\r\n     * @class tool_lp/competencies\r\n     * @param {Number} itemid\r\n     * @param {String} itemtype\r\n     * @param {Number} pagectxid\r\n     */\r\n    var competencies = function(itemid, itemtype, pagectxid) {\r\n        this.itemid = itemid;\r\n        this.itemtype = itemtype;\r\n        this.pageContextId = pagectxid;\r\n        this.pickerInstance = null;\r\n\r\n        $('[data-region=\"actions\"] button').prop('disabled', false);\r\n        this.registerEvents();\r\n        this.registerDragDrop();\r\n    };\r\n\r\n    /**\r\n     * Initialise the drag/drop code.\r\n     * @method registerDragDrop\r\n     */\r\n    competencies.prototype.registerDragDrop = function() {\r\n        var localthis = this;\r\n        // Init this module.\r\n        str.get_string('movecompetency', 'tool_lp').done(\r\n            function(movestring) {\r\n                dragdrop.dragdrop('movecompetency',\r\n                                  movestring,\r\n                                  {identifier: 'movecompetency', component: 'tool_lp'},\r\n                                  {identifier: 'movecompetencyafter', component: 'tool_lp'},\r\n                                  'drag-samenode',\r\n                                  'drag-parentnode',\r\n                                  'drag-handlecontainer',\r\n                                  function(drag, drop) {\r\n                                      localthis.handleDrop(drag, drop);\r\n                                  });\r\n            }\r\n        ).fail(notification.exception);\r\n\r\n    };\r\n\r\n    /**\r\n     * Handle a drop from a drag/drop operation.\r\n     *\r\n     * @method handleDrop\r\n     * @param {DOMNode} drag The dragged node.\r\n     * @param {DOMNode} drop The dropped on node.\r\n     */\r\n    competencies.prototype.handleDrop = function(drag, drop) {\r\n        var fromid = $(drag).data('id');\r\n        var toid = $(drop).data('id');\r\n        var localthis = this;\r\n        var requests = [];\r\n\r\n        if (localthis.itemtype == 'course') {\r\n            requests = ajax.call([\r\n                {\r\n                    methodname: 'core_competency_reorder_course_competency',\r\n                    args: {courseid: localthis.itemid, competencyidfrom: fromid, competencyidto: toid}\r\n                }\r\n            ]);\r\n        } else if (localthis.itemtype == 'template') {\r\n            requests = ajax.call([\r\n                {\r\n                    methodname: 'core_competency_reorder_template_competency',\r\n                    args: {templateid: localthis.itemid, competencyidfrom: fromid, competencyidto: toid}\r\n                }\r\n            ]);\r\n        } else if (localthis.itemtype == 'plan') {\r\n            requests = ajax.call([\r\n                {\r\n                    methodname: 'core_competency_reorder_plan_competency',\r\n                    args: {planid: localthis.itemid, competencyidfrom: fromid, competencyidto: toid}\r\n                }\r\n            ]);\r\n        } else {\r\n            return;\r\n        }\r\n\r\n        requests[0].fail(notification.exception);\r\n    };\r\n\r\n    /**\r\n     * Pick a competency\r\n     *\r\n     * @method pickCompetency\r\n     * @return {Promise}\r\n     */\r\n    competencies.prototype.pickCompetency = function() {\r\n        var self = this;\r\n        var requests;\r\n        var pagerender;\r\n        var pageregion;\r\n        var pageContextIncludes;\r\n\r\n        if (!self.pickerInstance) {\r\n            if (self.itemtype === 'template' || self.itemtype === 'course') {\r\n                pageContextIncludes = 'parents';\r\n            }\r\n            self.pickerInstance = new Picker(self.pageContextId, false, pageContextIncludes);\r\n            self.pickerInstance.on('save', function(e, data) {\r\n                var compIds = data.competencyIds;\r\n                var pendingPromise = new Pending();\r\n\r\n                if (self.itemtype === \"course\") {\r\n                    requests = [];\r\n\r\n                    $.each(compIds, function(index, compId) {\r\n                        requests.push({\r\n                            methodname: 'core_competency_add_competency_to_course',\r\n                            args: {courseid: self.itemid, competencyid: compId}\r\n                        });\r\n                    });\r\n                    requests.push({\r\n                        methodname: 'tool_lp_data_for_course_competencies_page',\r\n                        args: {courseid: self.itemid, moduleid: 0}\r\n                    });\r\n\r\n                    pagerender = 'tool_lp/course_competencies_page';\r\n                    pageregion = 'coursecompetenciespage';\r\n\r\n                } else if (self.itemtype === \"template\") {\r\n                    requests = [];\r\n\r\n                    $.each(compIds, function(index, compId) {\r\n                        requests.push({\r\n                            methodname: 'core_competency_add_competency_to_template',\r\n                            args: {templateid: self.itemid, competencyid: compId}\r\n                        });\r\n                    });\r\n                    requests.push({\r\n                        methodname: 'tool_lp_data_for_template_competencies_page',\r\n                        args: {templateid: self.itemid, pagecontext: {contextid: self.pageContextId}}\r\n                    });\r\n                    pagerender = 'tool_lp/template_competencies_page';\r\n                    pageregion = 'templatecompetenciespage';\r\n                } else if (self.itemtype === \"plan\") {\r\n                    requests = [];\r\n\r\n                    $.each(compIds, function(index, compId) {\r\n                        requests.push({\r\n                            methodname: 'core_competency_add_competency_to_plan',\r\n                            args: {planid: self.itemid, competencyid: compId}\r\n                        });\r\n                    });\r\n                    requests.push({\r\n                         methodname: 'tool_lp_data_for_plan_page',\r\n                         args: {planid: self.itemid}\r\n                    });\r\n                    pagerender = 'tool_lp/plan_page';\r\n                    pageregion = 'plan-page';\r\n                }\r\n                ajax.call(requests)[requests.length - 1]\r\n                .then(function(context) {\r\n                    return templates.render(pagerender, context);\r\n                })\r\n                .then(function(html, js) {\r\n                    templates.replaceNode($('[data-region=\"' + pageregion + '\"]'), html, js);\r\n                    return;\r\n                })\r\n                .then(pendingPromise.resolve)\r\n                .catch(notification.exception);\r\n            });\r\n        }\r\n\r\n        return self.pickerInstance.display();\r\n    };\r\n\r\n    /**\r\n     * Delete the link between competency and course, template or plan. Reload the page.\r\n     *\r\n     * @method doDelete\r\n     * @param {int} deleteid The id of record to delete.\r\n     */\r\n    competencies.prototype.doDelete = function(deleteid) {\r\n        var localthis = this;\r\n        var requests = [],\r\n            pagerender = '',\r\n            pageregion = '';\r\n\r\n        // Delete the link and reload the page template.\r\n        if (localthis.itemtype == 'course') {\r\n            requests = ajax.call([\r\n                {methodname: 'core_competency_remove_competency_from_course',\r\n                    args: {courseid: localthis.itemid, competencyid: deleteid}},\r\n                {methodname: 'tool_lp_data_for_course_competencies_page',\r\n                    args: {courseid: localthis.itemid, moduleid: 0}}\r\n            ]);\r\n            pagerender = 'tool_lp/course_competencies_page';\r\n            pageregion = 'coursecompetenciespage';\r\n        } else if (localthis.itemtype == 'template') {\r\n            requests = ajax.call([\r\n                {methodname: 'core_competency_remove_competency_from_template',\r\n                    args: {templateid: localthis.itemid, competencyid: deleteid}},\r\n                {methodname: 'tool_lp_data_for_template_competencies_page',\r\n                    args: {templateid: localthis.itemid, pagecontext: {contextid: localthis.pageContextId}}}\r\n            ]);\r\n            pagerender = 'tool_lp/template_competencies_page';\r\n            pageregion = 'templatecompetenciespage';\r\n        } else if (localthis.itemtype == 'plan') {\r\n            requests = ajax.call([\r\n                {methodname: 'core_competency_remove_competency_from_plan',\r\n                    args: {planid: localthis.itemid, competencyid: deleteid}},\r\n                {methodname: 'tool_lp_data_for_plan_page',\r\n                    args: {planid: localthis.itemid}}\r\n            ]);\r\n            pagerender = 'tool_lp/plan_page';\r\n            pageregion = 'plan-page';\r\n        }\r\n\r\n        requests[1].done(function(context) {\r\n            templates.render(pagerender, context).done(function(html, js) {\r\n                $('[data-region=\"' + pageregion + '\"]').replaceWith(html);\r\n                templates.runTemplateJS(js);\r\n            }).fail(notification.exception);\r\n        }).fail(notification.exception);\r\n\r\n    };\r\n\r\n    /**\r\n     * Show a confirm dialogue before deleting a competency.\r\n     *\r\n     * @method deleteHandler\r\n     * @param {int} deleteid The id of record to delete.\r\n     */\r\n    competencies.prototype.deleteHandler = function(deleteid) {\r\n        var localthis = this;\r\n        var requests = [];\r\n        var message;\r\n\r\n        if (localthis.itemtype == 'course') {\r\n            message = 'unlinkcompetencycourse';\r\n        } else if (localthis.itemtype == 'template') {\r\n            message = 'unlinkcompetencytemplate';\r\n        } else if (localthis.itemtype == 'plan') {\r\n            message = 'unlinkcompetencyplan';\r\n        } else {\r\n            return;\r\n        }\r\n\r\n        requests = ajax.call([{\r\n            methodname: 'core_competency_read_competency',\r\n            args: {id: deleteid}\r\n        }]);\r\n\r\n        requests[0].done(function(competency) {\r\n            str.get_strings([\r\n                {key: 'confirm', component: 'moodle'},\r\n                {key: message, component: 'tool_lp', param: competency.shortname},\r\n                {key: 'confirm', component: 'moodle'},\r\n                {key: 'cancel', component: 'moodle'}\r\n            ]).done(function(strings) {\r\n                notification.confirm(\r\n                    strings[0], // Confirm.\r\n                    strings[1], // Unlink the competency X from the course?\r\n                    strings[2], // Confirm.\r\n                    strings[3], // Cancel.\r\n                    function() {\r\n                        localthis.doDelete(deleteid);\r\n                    }\r\n                );\r\n            }).fail(notification.exception);\r\n        }).fail(notification.exception);\r\n    };\r\n\r\n    /**\r\n     * Register the javascript event handlers for this page.\r\n     *\r\n     * @method registerEvents\r\n     */\r\n    competencies.prototype.registerEvents = function() {\r\n        var localthis = this;\r\n\r\n        if (localthis.itemtype == 'course') {\r\n            // Course completion rule handling.\r\n            $('[data-region=\"coursecompetenciespage\"]').on('change', 'select[data-field=\"ruleoutcome\"]', function(e) {\r\n                var pendingPromise = new Pending();\r\n                var requests = [];\r\n                var pagerender = 'tool_lp/course_competencies_page';\r\n                var pageregion = 'coursecompetenciespage';\r\n                var coursecompetencyid = $(e.target).data('id');\r\n                var ruleoutcome = $(e.target).val();\r\n                requests = ajax.call([\r\n                    {methodname: 'core_competency_set_course_competency_ruleoutcome',\r\n                      args: {coursecompetencyid: coursecompetencyid, ruleoutcome: ruleoutcome}},\r\n                    {methodname: 'tool_lp_data_for_course_competencies_page',\r\n                      args: {courseid: localthis.itemid, moduleid: 0}}\r\n                ]);\r\n\r\n                requests[1].then(function(context) {\r\n                    return templates.render(pagerender, context);\r\n                })\r\n                .then(function(html, js) {\r\n                    return templates.replaceNode($('[data-region=\"' + pageregion + '\"]'), html, js);\r\n                })\r\n                .then(pendingPromise.resolve)\r\n                .catch(notification.exception);\r\n            });\r\n        }\r\n\r\n        $('[data-region=\"actions\"] button').click(function(e) {\r\n            var pendingPromise = new Pending();\r\n            e.preventDefault();\r\n\r\n            localthis.pickCompetency()\r\n                .then(pendingPromise.resolve)\r\n                .catch();\r\n        });\r\n        $('[data-action=\"delete-competency-link\"]').click(function(e) {\r\n            e.preventDefault();\r\n\r\n            var deleteid = $(e.target).closest('[data-id]').data('id');\r\n            localthis.deleteHandler(deleteid);\r\n        });\r\n    };\r\n\r\n    return /** @alias module:tool_lp/competencies */ competencies;\r\n});\r\n"],"names":["define","$","notification","ajax","templates","str","Picker","dragdrop","Pending","competencies","itemid","itemtype","pagectxid","this","pageContextId","pickerInstance","prop","registerEvents","registerDragDrop","prototype","localthis","get_string","done","movestring","identifier","component","drag","drop","handleDrop","fail","exception","fromid","data","toid","requests","call","methodname","args","courseid","competencyidfrom","competencyidto","templateid","planid","pickCompetency","pagerender","pageregion","pageContextIncludes","self","on","e","compIds","competencyIds","pendingPromise","each","index","compId","push","competencyid","moduleid","pagecontext","contextid","length","then","context","render","html","js","replaceNode","resolve","catch","display","doDelete","deleteid","replaceWith","runTemplateJS","deleteHandler","message","id","competency","get_strings","key","param","shortname","strings","confirm","coursecompetencyid","target","ruleoutcome","val","click","preventDefault","closest"],"mappings":"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"}