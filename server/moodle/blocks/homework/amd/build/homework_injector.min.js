define("block_homework/homework_injector",(function(){return{init:function(homework){if(document.querySelector('[data-region="calendar"]')&&JSON.stringify(homework).length>1){const addContentToModal=()=>{setTimeout((()=>{const modalContent=document.querySelector(".modal-content");if(modalContent){const summaryContainer=modalContent.querySelector(".summary-modal-container");if(summaryContainer){let eventid=summaryContainer.getAttribute("data-event-id");const containerFluid=summaryContainer.querySelector(".container-fluid");let Courseid,foundCourseLink=!1;containerFluid.querySelectorAll("a").forEach((element=>{if(element.href.includes("/course")){const regex=/course\/view\.php\?id=(\d+)/,match=element.href.match(regex);return match&&(Courseid=match[1]),foundCourseLink=!0,!1}}));let filteredHomework=Object.values(homework).filter((work=>work.eventid===eventid));if(0===filteredHomework.length)return;if(foundCourseLink&&window.location.href.includes("/my")&&!document.getElementById("homeworkRow")){const homeworkDiv=document.createElement("div");homeworkDiv.className="row mt-1",homeworkDiv.id="homeworkRow";const homeworkIconDiv=document.createElement("div");homeworkIconDiv.className="col-1",homeworkIconDiv.innerHTML='<i class="icon fa fa-align-left fa-fw" title="Description" role="img" aria-label="Description"></i>';const homeworkLinkDiv=document.createElement("div");homeworkLinkDiv.className="description-content col-11";let newString="";Object.values(filteredHomework).forEach((homeworkInfo=>{let convertedTime=new Date(1e3*homeworkInfo.duedate);newString+=`<p>HomeWork name = ${homeworkInfo.name} <br>\n                                                         Intro = ${homeworkInfo.intro?homeworkInfo.intro:"No intro"} <br>\n                                                         link = <a href="${window.location.href.replace("my/","mod/homework/view.php?id=")}${homeworkInfo.cmid}">link to homework</a></p>\n                                                         dueDate = ${homeworkInfo.duedate?`Duedate is ${convertedTime}`:"No duedate"}</p>`})),homeworkLinkDiv.innerHTML=newString,homeworkDiv.appendChild(homeworkIconDiv),homeworkDiv.appendChild(homeworkLinkDiv),containerFluid.appendChild(homeworkDiv)}}}}),500)},observer=new MutationObserver((mutations=>{mutations.forEach((mutation=>{mutation.target.classList.contains("show")&&addContentToModal()}))})),observeBackdrop=()=>{const modalBackdrop=document.querySelector('[data-region="modal-backdrop"]');modalBackdrop?observer.observe(modalBackdrop,{attributes:!0,attributeFilter:["class"]}):setTimeout(observeBackdrop,100)};function addEventListenerToButtons(event){const target=event.target;(target.classList.contains("eventname")||target.closest(".eventname"))&&(addContentToModal(),observeBackdrop(),document.querySelectorAll("[data-region]").forEach((element=>{element.removeEventListener("click",addEventListenerToButtons)})))}addContentToModal(),document.querySelectorAll("[data-region]").forEach((element=>{element.addEventListener("click",addEventListenerToButtons)}))}}}}));

//# sourceMappingURL=homework_injector.min.js.map