define("block_homework/homework_injector",(function(){return{init:function(homework){if(console.log("Script initialized"),console.log("Homework"+JSON.stringify(homework)),document.querySelector('[data-region="calendar"]')&&JSON.stringify(homework).length>1){console.log('Page contains data-region="calendar"');const addContentToModal=()=>{setTimeout((()=>{const modalContent=document.querySelector(".modal-content");if(modalContent){console.log("Modal content detected.");const summaryContainer=modalContent.querySelector(".summary-modal-container");if(summaryContainer){const containerFluid=summaryContainer.querySelector(".container-fluid");console.log("Container fluid:",containerFluid);let Courseid,foundCourseLink=!1;containerFluid.querySelectorAll("a").forEach((element=>{if(element.href.includes("/course")){console.log("in here");const regex=/course\/view\.php\?id=(\d+)/,match=element.href.match(regex);return match&&(Courseid=match[1],console.log("/course was found with ID:",Courseid)),foundCourseLink=!0,!1}}));let filteredHomework=Object.values(homework).filter((work=>work.course===Courseid));if(console.log("new homework"+JSON.stringify(filteredHomework)),foundCourseLink&&window.location.href.includes("/my")&&!document.getElementById("homeworkRow")){const homeworkDiv=document.createElement("div");homeworkDiv.className="row mt-1",homeworkDiv.id="homeworkRow";const homeworkIconDiv=document.createElement("div");homeworkIconDiv.className="col-1",homeworkIconDiv.innerHTML='<i class="icon fa fa-align-left fa-fw" title="Description" role="img" aria-label="Description"></i>';const homeworkLinkDiv=document.createElement("div");homeworkLinkDiv.className="description-content col-11";let newString="";Object.values(filteredHomework).forEach((homeworkInfo=>{newString+=`<p>HomeWork name = ${homeworkInfo.name} Intro = ${homeworkInfo.intro} link = <a href="https://localhost/mod/homework/view.php?id=${homeworkInfo.id}">link to homework</a> dueDate = ${homeworkInfo.duedate?`Duedate is ${Date(homeworkInfo.duedate)}`:"No duedate"}</p>`})),console.log("new string = "+newString),homeworkLinkDiv.innerHTML=newString,homeworkDiv.appendChild(homeworkIconDiv),homeworkDiv.appendChild(homeworkLinkDiv),containerFluid.appendChild(homeworkDiv),console.log("New content added to modal.")}}}}),500)},observer=new MutationObserver((mutations=>{mutations.forEach((mutation=>{mutation.target.classList.contains("show")&&addContentToModal()}))})),observeBackdrop=()=>{const modalBackdrop=document.querySelector('[data-region="modal-backdrop"]');modalBackdrop?observer.observe(modalBackdrop,{attributes:!0,attributeFilter:["class"]}):setTimeout(observeBackdrop,100)};function addEventListenerToButtons(event){const target=event.target;(target.classList.contains("eventname")||target.closest(".eventname"))&&(console.log('Class "eventname" found on the clicked element or its parent.'),addContentToModal(),observeBackdrop(),document.querySelectorAll("[data-region]").forEach((element=>{element.removeEventListener("click",addEventListenerToButtons)}))),console.log("Element with data-region clicked:",event.target)}addContentToModal(),document.querySelectorAll("[data-region]").forEach((element=>{element.addEventListener("click",addEventListenerToButtons)}))}else console.log('Page does not contain data-region="calendar"')}}}));

//# sourceMappingURL=homework_injector.min.js.map