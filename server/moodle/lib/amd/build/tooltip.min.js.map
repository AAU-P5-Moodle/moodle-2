{"version":3,"file":"tooltip.min.js","sources":["../src/tooltip.js"],"sourcesContent":["define(['jquery', 'core/aria'], function($, Aria) {\r\n\r\n    /**\r\n     * Tooltip class.\r\n     *\r\n     * @param {String} selector The css selector for the node(s) to enhance with tooltips.\r\n     */\r\n    var Tooltip = function(selector) {\r\n        // Tooltip code matches: http://www.w3.org/WAI/PF/aria-practices/#tooltip\r\n        this._regionSelector = selector;\r\n\r\n        // For each node matching the selector - find an aria-describedby attribute pointing to an role=\"tooltip\" element.\r\n\r\n        $(this._regionSelector).each(function(index, element) {\r\n            var tooltipId = $(element).attr('aria-describedby');\r\n            if (tooltipId) {\r\n                var tooltipele = document.getElementById(tooltipId);\r\n                if (tooltipele) {\r\n                    var correctRole = $(tooltipele).attr('role') == 'tooltip';\r\n\r\n                    if (correctRole) {\r\n                        $(tooltipele).hide();\r\n                        // Ensure the trigger for the tooltip is keyboard focusable.\r\n                        $(element).attr('tabindex', '0');\r\n                    }\r\n\r\n                    // Attach listeners.\r\n                    $(element).on('focus', this._handleFocus.bind(this));\r\n                    $(element).on('mouseover', this._handleMouseOver.bind(this));\r\n                    $(element).on('mouseout', this._handleMouseOut.bind(this));\r\n                    $(element).on('blur', this._handleBlur.bind(this));\r\n                    $(element).on('keydown', this._handleKeyDown.bind(this));\r\n                }\r\n            }\r\n        }.bind(this));\r\n    };\r\n\r\n    /** @property {String} Selector for the page region containing the user navigation. */\r\n    Tooltip.prototype._regionSelector = null;\r\n\r\n    /**\r\n     * Find the tooltip referred to by this element and show it.\r\n     *\r\n     * @param {Event} e\r\n     */\r\n    Tooltip.prototype._showTooltip = function(e) {\r\n        var triggerElement = $(e.target);\r\n        var tooltipId = triggerElement.attr('aria-describedby');\r\n        if (tooltipId) {\r\n            var tooltipele = $(document.getElementById(tooltipId));\r\n\r\n            tooltipele.show();\r\n            Aria.unhide(tooltipele);\r\n\r\n            if (!tooltipele.is('.tooltip')) {\r\n                // Change the markup to a bootstrap tooltip.\r\n                var inner = $('<div class=\"tooltip-inner\"></div>');\r\n                inner.append(tooltipele.contents());\r\n                tooltipele.append(inner);\r\n                tooltipele.addClass('tooltip');\r\n                tooltipele.addClass('bottom');\r\n                tooltipele.append('<div class=\"tooltip-arrow\"></div>');\r\n            }\r\n            var pos = triggerElement.offset();\r\n            pos.top += triggerElement.height() + 10;\r\n            $(tooltipele).offset(pos);\r\n        }\r\n    };\r\n\r\n    /**\r\n     * Find the tooltip referred to by this element and hide it.\r\n     *\r\n     * @param {Event} e\r\n     */\r\n    Tooltip.prototype._hideTooltip = function(e) {\r\n        var triggerElement = $(e.target);\r\n        var tooltipId = triggerElement.attr('aria-describedby');\r\n        if (tooltipId) {\r\n            var tooltipele = document.getElementById(tooltipId);\r\n\r\n            $(tooltipele).hide();\r\n            Aria.hide(tooltipele);\r\n        }\r\n    };\r\n\r\n    /**\r\n     * Listener for focus events.\r\n     * @param {Event} e\r\n     */\r\n    Tooltip.prototype._handleFocus = function(e) {\r\n        this._showTooltip(e);\r\n    };\r\n\r\n    /**\r\n     * Listener for keydown events.\r\n     * @param {Event} e\r\n     */\r\n    Tooltip.prototype._handleKeyDown = function(e) {\r\n        if (e.which == 27) {\r\n            this._hideTooltip(e);\r\n        }\r\n    };\r\n\r\n    /**\r\n     * Listener for mouseover events.\r\n     * @param {Event} e\r\n     */\r\n    Tooltip.prototype._handleMouseOver = function(e) {\r\n        this._showTooltip(e);\r\n    };\r\n\r\n    /**\r\n     * Listener for mouseout events.\r\n     * @param {Event} e\r\n     */\r\n    Tooltip.prototype._handleMouseOut = function(e) {\r\n        var triggerElement = $(e.target);\r\n\r\n        if (!triggerElement.is(\":focus\")) {\r\n            this._hideTooltip(e);\r\n        }\r\n    };\r\n\r\n    /**\r\n     * Listener for blur events.\r\n     * @param {Event} e\r\n     */\r\n    Tooltip.prototype._handleBlur = function(e) {\r\n        this._hideTooltip(e);\r\n    };\r\n\r\n    return Tooltip;\r\n});\r\n"],"names":["define","$","Aria","Tooltip","selector","this","_regionSelector","each","index","element","tooltipId","attr","tooltipele","document","getElementById","hide","on","_handleFocus","bind","_handleMouseOver","_handleMouseOut","_handleBlur","_handleKeyDown","prototype","_showTooltip","e","triggerElement","target","show","unhide","is","inner","append","contents","addClass","pos","offset","top","height","_hideTooltip","which"],"mappings":"AAAAA,OAAM,eAAC,CAAC,SAAU,cAAc,SAASC,EAAGC,MAOxC,IAAIC,QAAU,SAASC,UAEnBC,KAAKC,gBAAkBF,SAIvBH,EAAEI,KAAKC,iBAAiBC,KAAK,SAASC,MAAOC,SACzC,IAAIC,UAAYT,EAAEQ,SAASE,KAAK,oBAChC,GAAID,UAAW,CACX,IAAIE,WAAaC,SAASC,eAAeJ,WACzC,GAAIE,WACgD,WAA9BX,EAAEW,YAAYD,KAAK,UAGjCV,EAAEW,YAAYG,OAEdd,EAAEQ,SAASE,KAAK,WAAY,MAIhCV,EAAEQ,SAASO,GAAG,QAASX,KAAKY,aAAaC,KAAKb,OAC9CJ,EAAEQ,SAASO,GAAG,YAAaX,KAAKc,iBAAiBD,KAAKb,OACtDJ,EAAEQ,SAASO,GAAG,WAAYX,KAAKe,gBAAgBF,KAAKb,OACpDJ,EAAEQ,SAASO,GAAG,OAAQX,KAAKgB,YAAYH,KAAKb,OAC5CJ,EAAEQ,SAASO,GAAG,UAAWX,KAAKiB,eAAeJ,KAAKb,MAE1D,CACJ,EAAEa,KAAKb,QAiGX,OA7FAF,QAAQoB,UAAUjB,gBAAkB,KAOpCH,QAAQoB,UAAUC,aAAe,SAASC,GACtC,IAAIC,eAAiBzB,EAAEwB,EAAEE,QACrBjB,UAAYgB,eAAef,KAAK,oBACpC,GAAID,UAAW,CACX,IAAIE,WAAaX,EAAEY,SAASC,eAAeJ,YAK3C,GAHAE,WAAWgB,OACX1B,KAAK2B,OAAOjB,aAEPA,WAAWkB,GAAG,YAAa,CAE5B,IAAIC,MAAQ9B,EAAE,qCACd8B,MAAMC,OAAOpB,WAAWqB,YACxBrB,WAAWoB,OAAOD,OAClBnB,WAAWsB,SAAS,WACpBtB,WAAWsB,SAAS,UACpBtB,WAAWoB,OAAO,oCACtB,CACA,IAAIG,IAAMT,eAAeU,SACzBD,IAAIE,KAAOX,eAAeY,SAAW,GACrCrC,EAAEW,YAAYwB,OAAOD,IACzB,GAQJhC,QAAQoB,UAAUgB,aAAe,SAASd,GACtC,IACIf,UADiBT,EAAEwB,EAAEE,QACMhB,KAAK,oBACpC,GAAID,UAAW,CACX,IAAIE,WAAaC,SAASC,eAAeJ,WAEzCT,EAAEW,YAAYG,OACdb,KAAKa,KAAKH,WACd,GAOJT,QAAQoB,UAAUN,aAAe,SAASQ,GACtCpB,KAAKmB,aAAaC,IAOtBtB,QAAQoB,UAAUD,eAAiB,SAASG,GACzB,IAAXA,EAAEe,OACFnC,KAAKkC,aAAad,IAQ1BtB,QAAQoB,UAAUJ,iBAAmB,SAASM,GAC1CpB,KAAKmB,aAAaC,IAOtBtB,QAAQoB,UAAUH,gBAAkB,SAASK,GACpBxB,EAAEwB,EAAEE,QAELG,GAAG,WACnBzB,KAAKkC,aAAad,IAQ1BtB,QAAQoB,UAAUF,YAAc,SAASI,GACrCpB,KAAKkC,aAAad,IAGftB,OACX"}