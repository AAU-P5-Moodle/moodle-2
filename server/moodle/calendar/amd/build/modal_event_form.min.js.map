{"version":3,"file":"modal_event_form.min.js","sources":["../src/modal_event_form.js"],"sourcesContent":["// This file is part of Moodle - http://moodle.org/\r\n//\r\n// Moodle is free software: you can redistribute it and/or modify\r\n// it under the terms of the GNU General Public License as published by\r\n// the Free Software Foundation, either version 3 of the License, or\r\n// (at your option) any later version.\r\n//\r\n// Moodle is distributed in the hope that it will be useful,\r\n// but WITHOUT ANY WARRANTY; without even the implied warranty of\r\n// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\r\n// GNU General Public License for more details.\r\n//\r\n// You should have received a copy of the GNU General Public License\r\n// along with Moodle.  If not, see <http://www.gnu.org/licenses/>.\r\n\r\n/**\r\n * Contain the logic for the quick add or update event modal.\r\n *\r\n * @module     core_calendar/modal_event_form\r\n * @copyright  2017 Ryan Wyllie <ryan@moodle.com>\r\n * @license    http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later\r\n */\r\n\r\nimport $ from 'jquery';\r\nimport * as CustomEvents from 'core/custom_interaction_events';\r\nimport Modal from 'core/modal';\r\nimport * as FormEvents from 'core_form/events';\r\nimport CalendarEvents from './events';\r\nimport * as Str from 'core/str';\r\nimport * as Notification from 'core/notification';\r\nimport * as Fragment from 'core/fragment';\r\nimport * as Repository from 'core_calendar/repository';\r\n\r\nconst SELECTORS = {\r\n    SAVE_BUTTON: '[data-action=\"save\"]',\r\n    LOADING_ICON_CONTAINER: '[data-region=\"loading-icon-container\"]',\r\n};\r\n\r\nexport default class ModalEventForm extends Modal {\r\n    static TYPE = 'core_calendar-modal_event_form';\r\n    static TEMPLATE = 'calendar/modal_event_form';\r\n\r\n    /**\r\n     * Constructor for the Modal.\r\n     *\r\n     * @param {object} root The root jQuery element for the modal\r\n     */\r\n    constructor(root) {\r\n        super(root);\r\n\r\n        this.eventId = null;\r\n        this.startTime = null;\r\n        this.courseId = null;\r\n        this.categoryId = null;\r\n        this.contextId = null;\r\n        this.reloadingBody = false;\r\n        this.reloadingTitle = false;\r\n        this.saveButton = this.getFooter().find(SELECTORS.SAVE_BUTTON);\r\n    }\r\n\r\n    configure(modalConfig) {\r\n        modalConfig.large = true;\r\n        super.configure(modalConfig);\r\n    }\r\n\r\n    /**\r\n     * Set the context id to the given value.\r\n     *\r\n     * @method setContextId\r\n     * @param {Number} id The event id\r\n     */\r\n    setContextId(id) {\r\n        this.contextId = id;\r\n    }\r\n\r\n    /**\r\n     * Retrieve the current context id, if any.\r\n     *\r\n     * @method getContextId\r\n     * @return {Number|null} The event id\r\n     */\r\n    getContextId() {\r\n        return this.contextId;\r\n    }\r\n\r\n    /**\r\n     * Set the course id to the given value.\r\n     *\r\n     * @method setCourseId\r\n     * @param {Number} id The event id\r\n     */\r\n    setCourseId(id) {\r\n        this.courseId = id;\r\n    }\r\n\r\n    /**\r\n     * Retrieve the current course id, if any.\r\n     *\r\n     * @method getCourseId\r\n     * @return {Number|null} The event id\r\n     */\r\n    getCourseId() {\r\n        return this.courseId;\r\n    }\r\n\r\n    /**\r\n     * Set the category id to the given value.\r\n     *\r\n     * @method setCategoryId\r\n     * @param {Number} id The event id\r\n     */\r\n    setCategoryId(id) {\r\n        this.categoryId = id;\r\n    }\r\n\r\n    /**\r\n     * Retrieve the current category id, if any.\r\n     *\r\n     * @method getCategoryId\r\n     * @return {Number|null} The event id\r\n     */\r\n    getCategoryId() {\r\n        return this.categoryId;\r\n    }\r\n\r\n    /**\r\n     * Check if the modal has an course id.\r\n     *\r\n     * @method hasCourseId\r\n     * @return {bool}\r\n     */\r\n    hasCourseId() {\r\n        return this.courseId !== null;\r\n    }\r\n\r\n    /**\r\n     * Check if the modal has an category id.\r\n     *\r\n     * @method hasCategoryId\r\n     * @return {bool}\r\n     */\r\n    hasCategoryId() {\r\n        return this.categoryId !== null;\r\n    }\r\n\r\n    /**\r\n     * Set the event id to the given value.\r\n     *\r\n     * @method setEventId\r\n     * @param {Number} id The event id\r\n     */\r\n    setEventId(id) {\r\n        this.eventId = id;\r\n    }\r\n\r\n    /**\r\n     * Retrieve the current event id, if any.\r\n     *\r\n     * @method getEventId\r\n     * @return {Number|null} The event id\r\n     */\r\n    getEventId() {\r\n        return this.eventId;\r\n    }\r\n\r\n    /**\r\n     * Check if the modal has an event id.\r\n     *\r\n     * @method hasEventId\r\n     * @return {bool}\r\n     */\r\n    hasEventId() {\r\n        return this.eventId !== null;\r\n    }\r\n\r\n    /**\r\n     * Set the start time to the given value.\r\n     *\r\n     * @method setStartTime\r\n     * @param {Number} time The start time\r\n     */\r\n    setStartTime(time) {\r\n        this.startTime = time;\r\n    }\r\n\r\n    /**\r\n     * Retrieve the current start time, if any.\r\n     *\r\n     * @method getStartTime\r\n     * @return {Number|null} The start time\r\n     */\r\n    getStartTime() {\r\n        return this.startTime;\r\n    }\r\n\r\n    /**\r\n     * Check if the modal has start time.\r\n     *\r\n     * @method hasStartTime\r\n     * @return {bool}\r\n     */\r\n    hasStartTime() {\r\n        return this.startTime !== null;\r\n    }\r\n\r\n    /**\r\n     * Get the form element from the modal.\r\n     *\r\n     * @method getForm\r\n     * @return {object}\r\n     */\r\n    getForm() {\r\n        return this.getBody().find('form');\r\n    }\r\n\r\n    /**\r\n     * Disable the buttons in the footer.\r\n     *\r\n     * @method disableButtons\r\n     */\r\n    disableButtons() {\r\n        this.saveButton.prop('disabled', true);\r\n    }\r\n\r\n    /**\r\n     * Enable the buttons in the footer.\r\n     *\r\n     * @method enableButtons\r\n     */\r\n    enableButtons() {\r\n        this.saveButton.prop('disabled', false);\r\n    }\r\n\r\n    /**\r\n     * Reload the title for the modal to the appropriate value\r\n     * depending on whether we are creating a new event or\r\n     * editing an existing event.\r\n     *\r\n     * @method reloadTitleContent\r\n     * @return {object} A promise resolved with the new title text\r\n     */\r\n    reloadTitleContent() {\r\n        if (this.reloadingTitle) {\r\n            return this.titlePromise;\r\n        }\r\n\r\n        this.reloadingTitle = true;\r\n\r\n        if (this.hasEventId()) {\r\n            this.titlePromise = Str.get_string('editevent', 'calendar');\r\n        } else {\r\n            this.titlePromise = Str.get_string('newevent', 'calendar');\r\n        }\r\n\r\n        this.titlePromise.then((string) => {\r\n            this.setTitle(string);\r\n            return string;\r\n        })\r\n        .catch(Notification.exception)\r\n        .always(() => {\r\n            this.reloadingTitle = false;\r\n            return;\r\n        });\r\n\r\n        return this.titlePromise;\r\n    }\r\n\r\n    /**\r\n     * Send a request to the server to get the event_form in a fragment\r\n     * and render the result in the body of the modal.\r\n     *\r\n     * If serialised form data is provided then it will be sent in the\r\n     * request to the server to have the form rendered with the data. This\r\n     * is used when the form had a server side error and we need the server\r\n     * to re-render it for us to display the error to the user.\r\n     *\r\n     * @method reloadBodyContent\r\n     * @param {string} formData The serialised form data\r\n     * @return {object} A promise resolved with the fragment html and js from\r\n     */\r\n    reloadBodyContent(formData) {\r\n        if (this.reloadingBody) {\r\n            return this.bodyPromise;\r\n        }\r\n\r\n        this.reloadingBody = true;\r\n        this.disableButtons();\r\n\r\n        const args = {};\r\n\r\n        if (this.hasEventId()) {\r\n            args.eventid = this.getEventId();\r\n        }\r\n\r\n        if (this.hasStartTime()) {\r\n            args.starttime = this.getStartTime();\r\n        }\r\n\r\n        if (this.hasCourseId()) {\r\n            args.courseid = this.getCourseId();\r\n        }\r\n\r\n        if (this.hasCategoryId()) {\r\n            args.categoryid = this.getCategoryId();\r\n        }\r\n\r\n        if (typeof formData !== 'undefined') {\r\n            args.formdata = formData;\r\n        }\r\n\r\n        this.bodyPromise = Fragment.loadFragment('calendar', 'event_form', this.getContextId(), args);\r\n\r\n        this.setBody(this.bodyPromise);\r\n\r\n        this.bodyPromise.then(() => {\r\n            this.enableButtons();\r\n            return;\r\n        })\r\n        .catch(Notification.exception)\r\n        .always(() => {\r\n            this.reloadingBody = false;\r\n            return;\r\n        });\r\n\r\n        return this.bodyPromise;\r\n    }\r\n\r\n    /**\r\n     * Reload both the title and body content.\r\n     *\r\n     * @method reloadAllContent\r\n     * @return {object} promise\r\n     */\r\n    reloadAllContent() {\r\n        return $.when(this.reloadTitleContent(), this.reloadBodyContent());\r\n    }\r\n\r\n    /**\r\n     * Kick off a reload the modal content before showing it. This\r\n     * is to allow us to re-use the same modal for creating and\r\n     * editing different events within the page.\r\n     *\r\n     * We do the reload when showing the modal rather than hiding it\r\n     * to save a request to the server if the user closes the modal\r\n     * and never re-opens it.\r\n     *\r\n     * @method show\r\n     */\r\n    show() {\r\n        this.reloadAllContent();\r\n        super.show(this);\r\n    }\r\n\r\n    /**\r\n     * Clear the event id from the modal when it's closed so\r\n     * that it is loaded fresh next time it's displayed.\r\n     *\r\n     * The event id will be set by the calling code if it wants\r\n     * to edit a specific event.\r\n     *\r\n     * @method hide\r\n     */\r\n    hide() {\r\n        super.hide(this);\r\n        this.setEventId(null);\r\n        this.setStartTime(null);\r\n        this.setCourseId(null);\r\n        this.setCategoryId(null);\r\n    }\r\n\r\n    /**\r\n     * Get the serialised form data.\r\n     *\r\n     * @method getFormData\r\n     * @return {string} serialised form data\r\n     */\r\n    getFormData() {\r\n        return this.getForm().serialize();\r\n    }\r\n\r\n    /**\r\n     * Send the form data to the server to create or update\r\n     * an event.\r\n     *\r\n     * If there is a server side validation error then we re-request the\r\n     * rendered form (with the data) from the server in order to get the\r\n     * server side errors to display.\r\n     *\r\n     * On success the modal is hidden and the page is reloaded so that the\r\n     * new event will display.\r\n     *\r\n     * @method save\r\n     * @return {object} A promise\r\n     */\r\n    save() {\r\n        const loadingContainer = this.saveButton.find(SELECTORS.LOADING_ICON_CONTAINER);\r\n\r\n        // Now the change events have run, see if there are any \"invalid\" form fields.\r\n        const invalid = this.getForm().find('[aria-invalid=\"true\"]');\r\n\r\n        // If we found invalid fields, focus on the first one and do not submit via ajax.\r\n        if (invalid.length) {\r\n            invalid.first().focus();\r\n            return Promise.resolve();\r\n        }\r\n\r\n        loadingContainer.removeClass('hidden');\r\n        this.disableButtons();\r\n\r\n        const formData = this.getFormData();\r\n        // Send the form data to the server for processing.\r\n        return Repository.submitCreateUpdateForm(formData)\r\n            .then((response) => {\r\n                if (response.validationerror) {\r\n                    // If there was a server side validation error then\r\n                    // we need to re-request the rendered form from the server\r\n                    // in order to display the error for the user.\r\n                    this.reloadBodyContent(formData);\r\n                    return;\r\n                } else {\r\n                    // Check whether this was a new event or not.\r\n                    // The hide function unsets the form data so grab this before the hide.\r\n                    const isExisting = this.hasEventId();\r\n\r\n                    // No problemo! Our work here is done.\r\n                    this.hide();\r\n\r\n                    // Trigger the appropriate calendar event so that the view can be updated.\r\n                    if (isExisting) {\r\n                        $('body').trigger(CalendarEvents.updated, [response.event]);\r\n                    } else {\r\n                        $('body').trigger(CalendarEvents.created, [response.event]);\r\n                    }\r\n                }\r\n\r\n                return;\r\n            })\r\n            .catch(Notification.exception)\r\n            .always(() => {\r\n                // Regardless of success or error we should always stop\r\n                // the loading icon and re-enable the buttons.\r\n                loadingContainer.addClass('hidden');\r\n                this.enableButtons();\r\n\r\n                return;\r\n            });\r\n    }\r\n\r\n    /**\r\n     * Set up all of the event handling for the modal.\r\n     *\r\n     * @method registerEventListeners\r\n     * @fires event:uploadStarted\r\n     * @fires event:formSubmittedByJavascript\r\n     */\r\n    registerEventListeners() {\r\n        // Apply parent event listeners.\r\n        super.registerEventListeners(this);\r\n\r\n        // When the user clicks the save button we trigger the form submission. We need to\r\n        // trigger an actual submission because there is some JS code in the form that is\r\n        // listening for this event and doing some stuff (e.g. saving draft areas etc).\r\n        this.getModal().on(CustomEvents.events.activate, SELECTORS.SAVE_BUTTON, (e, data) => {\r\n            this.getForm().submit();\r\n            data.originalEvent.preventDefault();\r\n            e.stopPropagation();\r\n        });\r\n\r\n        // Catch the submit event before it is actually processed by the browser and\r\n        // prevent the submission. We'll take it from here.\r\n        this.getModal().on('submit', (e) => {\r\n            FormEvents.notifyFormSubmittedByJavascript(this.getForm()[0]);\r\n\r\n            this.save();\r\n\r\n            // Stop the form from actually submitting and prevent it's\r\n            // propagation because we have already handled the event.\r\n            e.preventDefault();\r\n            e.stopPropagation();\r\n        });\r\n    }\r\n}\r\n\r\nModalEventForm.registerModalType();\r\n"],"names":["_getRequireWildcardCache","e","WeakMap","r","t","_interopRequireWildcard","__esModule","default","has","get","n","__proto__","a","Object","defineProperty","getOwnPropertyDescriptor","u","hasOwnProperty","call","i","set","_interopRequireDefault","_jquery","CustomEvents","_modal","FormEvents","_events2","Str","Notification","Fragment","Repository","SELECTORS","ModalEventForm","Modal","static","constructor","root","super","this","eventId","startTime","courseId","categoryId","contextId","reloadingBody","reloadingTitle","saveButton","getFooter","find","configure","modalConfig","large","setContextId","id","getContextId","setCourseId","getCourseId","setCategoryId","getCategoryId","hasCourseId","hasCategoryId","setEventId","getEventId","hasEventId","setStartTime","time","getStartTime","hasStartTime","getForm","getBody","disableButtons","prop","enableButtons","reloadTitleContent","titlePromise","get_string","then","string","setTitle","catch","exception","always","reloadBodyContent","formData","bodyPromise","args","eventid","starttime","courseid","categoryid","formdata","loadFragment","setBody","reloadAllContent","$","when","show","hide","getFormData","serialize","save","loadingContainer","invalid","length","first","focus","Promise","resolve","removeClass","submitCreateUpdateForm","response","validationerror","isExisting","trigger","CalendarEvents","updated","event","created","addClass","registerEventListeners","getModal","on","events","activate","data","submit","originalEvent","preventDefault","stopPropagation","notifyFormSubmittedByJavascript","_exports","registerModalType"],"mappings":"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"}