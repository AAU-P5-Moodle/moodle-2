{"version":3,"file":"categories.min.js","sources":["../../../src/datafilter/filtertypes/categories.js"],"sourcesContent":["// This file is part of Moodle - http://moodle.org/\r\n//\r\n// Moodle is free software: you can redistribute it and/or modify\r\n// it under the terms of the GNU General Public License as published by\r\n// the Free Software Foundation, either version 3 of the License, or\r\n// (at your option) any later version.\r\n//\r\n// Moodle is distributed in the hope that it will be useful,\r\n// but WITHOUT ANY WARRANTY; without even the implied warranty of\r\n// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\r\n// GNU General Public License for more details.\r\n//\r\n// You should have received a copy of the GNU General Public License\r\n// along with Moodle.  If not, see <http://www.gnu.org/licenses/>.\r\n\r\n/**\r\n * Filter managing display of subcategories questions.\r\n *\r\n * @module     qbank_managecategories/datafilter/filtertypes/categories\r\n * @author     Mark Johnson <mark.johnson@catalyst-eu.net>\r\n * @copyright  2023 Catalyst IT Europe Ltd.\r\n * @license    http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later\r\n */\r\n\r\nimport GenericFilter from 'core/datafilter/filtertype';\r\nimport Templates from 'core/templates';\r\n\r\nexport default class extends GenericFilter {\r\n\r\n    SELECTORS = {\r\n        includeSubcategories: 'input[name=category-subcategories]',\r\n    };\r\n\r\n    constructor(filterType, rootNode, initialValues, filterOptions = {includeSubcategories: false}) {\r\n        super(filterType, rootNode, initialValues);\r\n        this.addSubcategoryCheckbox(filterOptions.includeSubcategories);\r\n    }\r\n\r\n    async addSubcategoryCheckbox(checked = false) {\r\n        const filterValueNode = this.getFilterValueNode();\r\n        const {html} = await Templates.renderForPromise('qbank_managecategories/include_subcategories_checkbox', {\r\n            checked: checked,\r\n        });\r\n        filterValueNode.insertAdjacentHTML('afterend', html);\r\n    }\r\n\r\n    get filterOptions() {\r\n        return [\r\n            {name: 'includesubcategories', value: this.filterRoot.querySelector(this.SELECTORS.includeSubcategories).checked}\r\n        ];\r\n    }\r\n\r\n    get filterValue() {\r\n        return {\r\n            name: this.name,\r\n            jointype: this.jointype,\r\n            values: this.values,\r\n            filteroptions: this.filterOptions,\r\n        };\r\n    }\r\n}\r\n"],"names":["_interopRequireDefault","e","__esModule","default","_filtertype","_templates","_default","GenericFilter","SELECTORS","includeSubcategories","constructor","filterType","rootNode","initialValues","filterOptions","arguments","length","undefined","super","this","addSubcategoryCheckbox","checked","filterValueNode","getFilterValueNode","html","Templates","renderForPromise","insertAdjacentHTML","name","value","filterRoot","querySelector","filterValue","jointype","values","filteroptions","_exports"],"mappings":"uKAyBuC,SAAAA,uBAAAC,GAAAA,OAAAA,GAAAA,EAAAC,WAAAD,EAAAE,CAAAA,QAAAF,EAAA;;;;;;;;qFADvCG,YAAAJ,uBAAAI,aACAC,WAAAL,uBAAAK,YAEe,MAAAC,iBAAcC,YAAAA,QAEzBC,UAAY,CACRC,qBAAsB,sCAG1BC,WAAAA,CAAYC,WAAYC,SAAUC,eAA8D,IAA/CC,cAAaC,UAAAC,OAAAD,QAAAE,IAAAF,UAAAE,GAAAF,UAAG,GAAA,CAACN,sBAAsB,GACpFS,MAAMP,WAAYC,SAAUC,eAC5BM,KAAKC,uBAAuBN,cAAcL,qBAC9C,CAEA,4BAAMW,GAAwC,IAAjBC,QAAON,UAAAC,OAAA,QAAAC,IAAAF,UAAA,IAAAA,UAAA,GAChC,MAAMO,gBAAkBH,KAAKI,sBACvBC,KAACA,YAAcC,WAAAA,QAAUC,iBAAiB,wDAAyD,CACrGL,QAASA,UAEbC,gBAAgBK,mBAAmB,WAAYH,KACnD,CAEA,iBAAIV,GACA,MAAO,CACH,CAACc,KAAM,uBAAwBC,MAAOV,KAAKW,WAAWC,cAAcZ,KAAKX,UAAUC,sBAAsBY,SAEjH,CAEA,eAAIW,GACA,MAAO,CACHJ,KAAMT,KAAKS,KACXK,SAAUd,KAAKc,SACfC,OAAQf,KAAKe,OACbC,cAAehB,KAAKL,cAE5B,EACH,OAAAsB,SAAAjC,QAAAG,SAAA8B,SAAAjC,OAAA"}