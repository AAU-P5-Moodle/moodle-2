{"version":3,"file":"editor_display.min.js","sources":["../src/editor_display.js"],"sourcesContent":["// This file is part of Moodle - http://moodle.org/\r\n//\r\n// Moodle is free software: you can redistribute it and/or modify\r\n// it under the terms of the GNU General Public License as published by\r\n// the Free Software Foundation, either version 3 of the License, or\r\n// (at your option) any later version.\r\n//\r\n// Moodle is distributed in the hope that it will be useful,\r\n// but WITHOUT ANY WARRANTY; without even the implied warranty of\r\n// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\r\n// GNU General Public License for more details.\r\n//\r\n// You should have received a copy of the GNU General Public License\r\n// along with Moodle.  If not, see <http://www.gnu.org/licenses/>.\r\n\r\n/**\r\n * This module handles the display of the H5P authoring tool.\r\n *\r\n * @module     core_h5p/editor_display\r\n * @copyright  2020 Victor Deniz <victor@moodle.com>\r\n * @license    http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later\r\n */\r\n\r\nimport $ from 'jquery';\r\n/* global H5PEditor */\r\n\r\n/**\r\n * Display the H5P authoring tool.\r\n *\r\n * @param {String} elementId Root element.\r\n */\r\nexport const init = (elementId) => {\r\n    const editorwrapper = $('#' + elementId);\r\n    const editor = $('.h5p-editor');\r\n    const mform = editor.closest(\"form\");\r\n    const editorupload = $(\"h5p-editor-upload\");\r\n    const h5plibrary = $('input[name=\"h5plibrary\"]');\r\n    const h5pparams = $('input[name=\"h5pparams\"]');\r\n    const inputname = $('input[name=\"name\"]');\r\n    const h5paction = $('input[name=\"h5paction\"]');\r\n\r\n    // Cancel validation and submission of form if clicking cancel button.\r\n    const cancelSubmitCallback = function($button) {\r\n        return $button.is('[name=\"cancel\"]');\r\n    };\r\n\r\n    h5paction.val(\"create\");\r\n\r\n    H5PEditor.init(\r\n        mform,\r\n        h5paction,\r\n        editorupload,\r\n        editorwrapper,\r\n        editor,\r\n        h5plibrary,\r\n        h5pparams,\r\n        '',\r\n        inputname,\r\n        cancelSubmitCallback\r\n    );\r\n    document.querySelector('#' + elementId + ' iframe').setAttribute('name', 'h5p-editor');\r\n};\r\n"],"names":["e","_jquery","__esModule","default","_exports","init","elementId","editorwrapper","$","editor","mform","closest","editorupload","h5plibrary","h5pparams","inputname","h5paction","val","H5PEditor","$button","is","document","querySelector","setAttribute"],"mappings":"kFAuBuB,IAAAA;;;;;;;kFAAvBC,SAAuBD,EAAvBC,UAAuBD,EAAAE,WAAAF,EAAAG,CAAAA,QAAAH,GAsCrBI,SAAAC,KA9BmBC,YACjB,MAAMC,eAAgB,EAAAC,QAAAA,SAAE,IAAMF,WACxBG,QAAS,EAAAD,QAACL,SAAC,eACXO,MAAQD,OAAOE,QAAQ,QACvBC,cAAe,EAAAJ,QAACL,SAAC,qBACjBU,YAAa,EAAAL,QAACL,SAAC,4BACfW,WAAY,EAAAN,QAACL,SAAC,2BACdY,WAAY,EAAAP,QAACL,SAAC,sBACda,WAAY,EAAAR,QAACL,SAAC,2BAOpBa,UAAUC,IAAI,UAEdC,UAAUb,KACNK,MACAM,UACAJ,aACAL,cACAE,OACAI,WACAC,UACA,GACAC,WAfyB,SAASI,SAClC,OAAOA,QAAQC,GAAG,sBAiBtBC,SAASC,cAAc,IAAMhB,UAAY,WAAWiB,aAAa,OAAQ,aAAa,CACxF"}