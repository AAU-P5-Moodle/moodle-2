define("mod_homework/homeworkchooser",["exports","jquery","core/ajax","mod_homework/modal_homework","core/modal_events"],(function(_exports,_jquery,_ajax,_modal_homework,_modal_events){function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}Object.defineProperty(_exports,"__esModule",{value:!0}),_exports.init=void 0,_jquery=_interopRequireDefault(_jquery),_ajax=_interopRequireDefault(_ajax),_modal_homework=_interopRequireDefault(_modal_homework),_modal_events=_interopRequireDefault(_modal_events);_exports.init=async(cmid,title)=>{(0,_jquery.default)("#open-homework-chooser").on("click",(()=>{_ajax.default.call([{methodname:"mod_homework_get_homework_chooser",args:{cmid:cmid},done:async function(response){const modal=await _modal_homework.default.create({title:title,body:"".concat(response.html),large:!0});modal.show(),modal.getRoot().on(_modal_events.default.hidden,(()=>{console.log("Modal closed!")})),modal.getRoot().on("click",'[data-action="submit"]',(e=>{e.preventDefault(),handleFormSubmit(modal)})),modal.getRoot().on("click",'[data-action="cancel"]',(e=>{e.preventDefault(),modal.hide()}))},fail:error=>{console.error("Failed to load homework chooser content:",error)}}])}))};const handleFormSubmit=modal=>{const inputField=modal.getRoot().find("#inputField").val(),startPage=modal.getRoot().find("#startPage").val(),endPage=modal.getRoot().find("#endPage").val();""!==inputField?_ajax.default.call([{methodname:"mod_homework_save_homework_chooser",args:{inputfield:inputField,startpage:startPage,endpage:endPage},done:function(response){console.log("Data saved successfully:",response),modal.hide()},fail:function(error){console.error("Failed to save data:",error)}}]):alert("Please fill in input field.")}}));

//# sourceMappingURL=homeworkchooser.min.js.map