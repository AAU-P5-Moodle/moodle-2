{"version":3,"file":"homeworkchooser.min.js","sources":["../src/homeworkchooser.js"],"sourcesContent":["// homeworkchooser.js (Updated Version)\n\nimport $ from 'jquery';\nimport Ajax from 'core/ajax';\nimport MyModal from 'mod_homework/modal_homework';\nimport ModalEvents from 'core/modal_events';\nimport Dropzone from 'core/dropzone';\n\n/**\n * Initializes the Homework Chooser Modal.\n *\n * @param {int} cmid - Course Module ID\n * @param {string} title - Title for the modal\n * @param {int} cminstance\n */\nexport const init = async (cmid, title, cminstance) => {\n    $('#open-homework-chooser').on('click', () => {\n        Ajax.call([{\n            methodname: 'mod_homework_get_homework_chooser',\n            args: {cmid: cmid},\n            done: async function(response) {\n                const modal = await MyModal.create({\n                    title: title,\n                    body: `${response.html}`,\n                    // footer: 'An example footer content',\n                    large: true,\n                    removeOnClose: true,\n                });\n\n                // Show the modal\n                modal.show();\n\n                // Initialize elements once the modal content is rendered\n                modal.getRoot().on(ModalEvents.shown, () => {\n                    // Initialize the elements after modal is displayed\n                    const startPageInput = modal.getRoot().find('#startPage')[0];\n                    const endPageInput = modal.getRoot().find('#endPage')[0];\n                    const radioButtons = modal.getRoot().find('input[name=\"option\"]');\n                    const testTextarea = modal.getRoot().find('#page-range-input')[0];\n                    const testLink = modal.getRoot().find('#linkDiv')[0];\n                    const dropzoneContainer = modal.getRoot().find('#dropzone-container')[0];\n\n                    // Attach event listeners for page input validation\n                    startPageInput.addEventListener('input', validatePageRange);\n                    endPageInput.addEventListener('input', validatePageRange);\n\n                    // Attach event listeners for radio buttons\n                    radioButtons.each((_, radio) => {\n                        radio.addEventListener('change', toggleInputs);\n                    });\n\n                    initializeDropzone(dropzoneContainer);\n\n                    // Function to validate page range\n                    /**\n                     *\n                     */\n                    function validatePageRange() {\n                        const startPage = parseInt(startPageInput.value, 10);\n                        const endPage = parseInt(endPageInput.value, 10);\n\n                        if (endPageInput.value !== \"\" && startPageInput.value !== \"\") {\n                            if (endPage < startPage) {\n                                endPageInput.setCustomValidity(\"End Page must be greater than or equal to Start Page\");\n                            } else {\n                                endPageInput.setCustomValidity(\"\"); // Clear error message if valid\n                            }\n                        } else {\n                            endPageInput.setCustomValidity(\"\"); // Clear error if either field is empty\n                        }\n                    }\n\n                    // Function to toggle between text and link inputs\n                    /**\n                     *\n                     */\n                    function toggleInputs() {\n                        if (document.getElementById(\"option1\").checked) {\n                            testTextarea.style.display = \"block\";\n                            testLink.style.display = \"none\";\n                        } else if (document.getElementById(\"option2\").checked) {\n                            testTextarea.style.display = \"none\";\n                            testLink.style.display = \"block\";\n                        }\n                    }\n                });\n\n                // Attach an event listener to handle the modal hidden event\n                modal.getRoot().on(ModalEvents.hidden, () => {\n                    console.log('Modal closed!');\n                });\n\n                // Attach event listeners for buttons\n                modal.getRoot().on('click', '[data-action=\"submit\"]', (e) => {\n                    e.preventDefault();\n                    handleFormSubmit(modal, cminstance);\n                });\n\n                modal.getRoot().on('click', '[data-action=\"cancel\"]', (e) => {\n                    e.preventDefault();\n                    modal.destroy();\n                });\n            },\n            fail: (error) => {\n                console.error(\"Failed to load homework chooser content:\", error);\n            }\n        }]);\n    });\n};\n\nlet dropZoneFiles = []; // Store files to upload later\nlet uploadedFileIds = []; // Store file IDs after successful upload\n\nconst initializeDropzone = (container) => {\n    const dropZone = new Dropzone(container, \"application/pdf\", (files) => {\n        for (let file of files) {\n            if (file.type === \"application/pdf\") {\n                dropZoneFiles.push(file); // Store file for later upload\n            } else {\n                console.warn(\"Invalid file type:\", file.type);\n            }\n        }\n    });\n\n    dropZone.setLabel(\"(Optional) Drop PDF files here\");\n    dropZone.init();\n};\n\nconst uploadDropzoneFiles = async () => {\n    for (let file of dropZoneFiles) {\n        try {\n            const formData = new FormData();\n            formData.append(\"file\", file);\n\n            const response = await fetch(\"/mod/homework/save_homework_file.php\", {\n                method: \"POST\",\n                body: formData\n            });\n\n            const result = await response.json();\n\n            if (response.ok && result.status === 'success') {\n                console.log(\"File uploaded successfully:\", file.name);\n                console.log(result);\n                uploadedFileIds.push(result.fileid); // Store the file ID\n            } else {\n                console.error(\"Failed to upload file:\", file.name);\n            }\n        } catch (error) {\n            console.error(\"Error uploading file:\", file.name, error);\n        }\n    }\n    dropZoneFiles = []; // Clear stored files after upload\n};\n\nconst handleFormSubmit = async (modal, cminstance) => {\n    let inputField = modal.getRoot().find('#inputField').val();\n\n    if (modal.getRoot().find('#option1').is(':checked')) {\n        let startPage = modal.getRoot().find('#startPage').val();\n        let endPage = modal.getRoot().find('#endPage').val();\n\n        await uploadDropzoneFiles();\n\n        Ajax.call([{\n            methodname: 'mod_homework_save_homework_literature',\n            args: {\n                inputfield: inputField,\n                startpage: startPage,\n                endpage: endPage,\n                instance: cminstance,\n                fileid: uploadedFileIds.length ? uploadedFileIds[0] : null\n            },\n            done: function(response) {\n                console.log(\"Data saved successfully:\", response);\n                dropZoneFiles = [];\n                uploadedFileIds = [];\n                modal.hide();\n            },\n            fail: function(error) {\n                console.error(\"Failed to save data:\", error);\n            }\n        }]);\n    } else if (modal.getRoot().find('#option2').is(':checked')) {\n        let link = modal.getRoot().find('#link').val();\n\n        await uploadDropzoneFiles();\n\n        Ajax.call([{\n            methodname: 'mod_homework_save_homework_link',\n            args: {\n                inputfield: inputField,\n                link: link,\n                instance: cminstance\n            },\n            done: function(response) {\n                console.log(\"Data saved successfully:\", response);\n                modal.hide();\n            },\n            fail: function(error) {\n                console.error(\"Failed to save data:\", error);\n            }\n        }]);\n    }\n};\n"],"names":["_interopRequireDefault","e","__esModule","default","_createForOfIteratorHelper","r","t","Symbol","iterator","Array","isArray","a","_arrayLikeToArray","toString","call","slice","constructor","name","from","test","_unsupportedIterableToArray","length","_n","F","s","n","done","value","f","TypeError","o","u","next","_regeneratorRuntime","Object","prototype","hasOwnProperty","defineProperty","i","c","asyncIterator","toStringTag","define","enumerable","configurable","writable","wrap","Generator","create","Context","makeInvokeMethod","tryCatch","type","arg","h","l","y","GeneratorFunction","GeneratorFunctionPrototype","p","this","d","getPrototypeOf","v","values","g","defineIteratorMethods","forEach","_invoke","AsyncIterator","invoke","_typeof","resolve","__await","then","callInvokeWithMethodAndArg","Error","method","delegate","maybeInvokeDelegate","sent","_sent","dispatchException","abrupt","resultName","nextLoc","pushTryEntry","tryLoc","catchLoc","finallyLoc","afterLoc","tryEntries","push","resetTryEntry","completion","reset","isNaN","displayName","isGeneratorFunction","mark","setPrototypeOf","__proto__","awrap","async","Promise","keys","reverse","pop","prev","charAt","stop","rval","handle","complete","finish","delegateYield","asyncGeneratorStep","_asyncToGenerator","arguments","apply","_next","_throw","_jquery","_ajax","_modal_homework","_modal_events","_dropzone","_exports","init","_ref","_callee2","cmid","title","cminstance","_context2","$","on","_done","Ajax","methodname","args","_callee","response","modal","_context","MyModal","body","concat","html","large","removeOnClose","show","getRoot","ModalEvents","shown","startPageInput","find","endPageInput","radioButtons","testTextarea","testLink","dropzoneContainer","validatePageRange","startPage","parseInt","endPage","setCustomValidity","toggleInputs","document","getElementById","checked","style","display","addEventListener","each","_","radio","initializeDropzone","hidden","console","log","preventDefault","handleFormSubmit","destroy","_x4","fail","error","_x","_x2","_x3","_ref2","_ref3","dropZoneFiles","uploadedFileIds","container","dropZone","Dropzone","files","_step","_iterator","file","warn","err","setLabel","uploadDropzoneFiles","_callee3","_i","_dropZoneFiles","formData","result","_context3","FormData","append","fetch","json","ok","status","fileid","t0","_callee4","inputField","link","_context4","val","is","inputfield","startpage","endpage","instance","hide","_x5","_x6"],"mappings":"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"}