{"version":3,"file":"homeworkchooser.min.js","sources":["../src/homeworkchooser.js"],"sourcesContent":["// homeworkchooser.js (Updated Version)\n\nimport $ from 'jquery';\nimport Ajax from 'core/ajax';\nimport MyModal from 'mod_homework/modal_homework';\nimport ModalEvents from 'core/modal_events';\n// import ModalCancel from 'core/modal_cancel';\n/**\n * Initializes the Homework Chooser Modal.\n *\n * @param {int} cmid - Course Module ID\n * @param {string} title - Title for the modal\n */\nexport const init = async (cmid, title) => {\n    $('#open-homework-chooser').on('click', () => {\n        Ajax.call([{\n            methodname: 'mod_homework_get_homework_chooser',\n            args: {cmid: cmid},\n            done: async function(response) {\n                const modal = await MyModal.create({\n                    title: title,\n                    body: `${response.html}`,\n                    // footer: 'An example footer content',\n                    large: true,\n                });\n\n                // Show the modal\n                modal.show();\n\n                // Attach an event listener to handle the modal hidden event\n                modal.getRoot().on(ModalEvents.hidden, () => {\n                    console.log('Modal closed!');\n                });\n\n                // Attach event listeners for buttons\n                modal.getRoot().on('click', '[data-action=\"submit\"]', (e) => {\n                    e.preventDefault();\n                    handleFormSubmit(modal);\n                });\n\n                modal.getRoot().on('click', '[data-action=\"cancel\"]', (e) => {\n                    e.preventDefault();\n                    modal.hide();\n                });\n            },\n            fail: (error) => {\n                console.error(\"Failed to load homework chooser content:\", error);\n            }\n        }]);\n    });\n};\n\n/**\n * Handles form submission inside the modal.\n *\n * @param {Modal} modal - The instance of the modal containing the form.\n */\nconst handleFormSubmit = (modal) => {\n    const inputField = modal.getRoot().find('#inputField').val();\n\n    if (inputField === \"\") {\n        alert(\"Please fill in input field.\");\n        return;\n    }\n    // AJAX call to send data to the server\n    Ajax.call([{\n        methodname: 'mod_homework_save_homework_chooser',  // Your PHP function that will handle the data\n        args: {\n            inputfield: inputField,\n        },\n        done: function(response) {\n            console.log(\"Data saved successfully:\", response);\n            // Close the modal after successful submission\n            modal.hide();\n        },\n        fail: function(error) {\n            console.error(\"Failed to save data:\", error);\n        }\n    }]);\n};"],"names":["async","cmid","title","on","call","methodname","args","done","response","modal","MyModal","create","body","html","large","show","getRoot","ModalEvents","hidden","console","log","e","preventDefault","handleFormSubmit","hide","fail","error","inputField","find","val","inputfield","alert"],"mappings":"8hBAaoBA,MAAOC,KAAMC,6BAC3B,0BAA0BC,GAAG,SAAS,mBAC/BC,KAAK,CAAC,CACPC,WAAY,oCACZC,KAAM,CAACL,KAAMA,MACbM,KAAMP,eAAeQ,gBACXC,YAAcC,wBAAQC,OAAO,CAC/BT,MAAOA,MACPU,eAASJ,SAASK,MAElBC,OAAO,IAIXL,MAAMM,OAGNN,MAAMO,UAAUb,GAAGc,sBAAYC,QAAQ,KACnCC,QAAQC,IAAI,oBAIhBX,MAAMO,UAAUb,GAAG,QAAS,0BAA2BkB,IACnDA,EAAEC,iBACFC,iBAAiBd,UAGrBA,MAAMO,UAAUb,GAAG,QAAS,0BAA2BkB,IACnDA,EAAEC,iBACFb,MAAMe,WAGdC,KAAOC,QACHP,QAAQO,MAAM,2CAA4CA,qBAWpEH,iBAAoBd,cAChBkB,WAAalB,MAAMO,UAAUY,KAAK,eAAeC,MAEpC,KAAfF,yBAKCvB,KAAK,CAAC,CACPC,WAAY,qCACZC,KAAM,CACFwB,WAAYH,YAEhBpB,KAAM,SAASC,UACXW,QAAQC,IAAI,2BAA4BZ,UAExCC,MAAMe,QAEVC,KAAM,SAASC,OACXP,QAAQO,MAAM,uBAAwBA,WAf1CK,MAAM"}